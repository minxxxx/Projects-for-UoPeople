<!DOCTYPE html>
<!-- saved from url=(0040)https://leanpub.com/whatsnewinjava8/read -->
<html class="js no-touch multiplebgs svg inlinesvg svgclippaths no-ie8compat wf-notosans-n4-active wf-notosans-n7-active wf-notosans-i4-active wf-notosans-i7-active wf-notoserif-n4-active wf-notoserif-n7-active wf-notoserif-i4-active wf-notoserif-i7-active wf-active" lang="en" style=""><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta content="IE=edge" http-equiv="X-UA-Compatible">

<meta content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no" name="viewport">
<meta content="en" name="Content-Language">
<link rel="apple-touch-icon-precomposed" type="image/png" href="https://d3g6anj9jkury9.cloudfront.net/assets/favicons/apple-touch-icon-57x57-b83f183ad6b00aa74d8e692126c7017e.png" sizes="57x57">
<link rel="apple-touch-icon-precomposed" type="image/png" href="https://d3g6anj9jkury9.cloudfront.net/assets/favicons/apple-touch-icon-60x60-6dc1c10b7145a2f1156af5b798565268.png" sizes="60x60">
<link rel="apple-touch-icon-precomposed" type="image/png" href="https://d3g6anj9jkury9.cloudfront.net/assets/favicons/apple-touch-icon-72x72-5037b667b6f7a8d5ba8c4ffb4a62ec2d.png" sizes="72x72">
<link rel="apple-touch-icon-precomposed" type="image/png" href="https://d3g6anj9jkury9.cloudfront.net/assets/favicons/apple-touch-icon-76x76-57860ca8a817754d2861e8d0ef943b23.png" sizes="76x76">
<link rel="apple-touch-icon-precomposed" type="image/png" href="https://d3g6anj9jkury9.cloudfront.net/assets/favicons/apple-touch-icon-114x114-27f9c42684f2a77945643b35b28df6e3.png" sizes="114x114">
<link rel="apple-touch-icon-precomposed" type="image/png" href="https://d3g6anj9jkury9.cloudfront.net/assets/favicons/apple-touch-icon-120x120-3819f03d1bad1584719af0212396a6fc.png" sizes="120x120">
<link rel="apple-touch-icon-precomposed" type="image/png" href="https://d3g6anj9jkury9.cloudfront.net/assets/favicons/apple-touch-icon-144x144-a79479b4595dc7ca2f3e6f5b962d16fd.png" sizes="144x144">
<link rel="apple-touch-icon-precomposed" type="image/png" href="https://d3g6anj9jkury9.cloudfront.net/assets/favicons/apple-touch-icon-152x152-aafe015ef1c22234133158a89b29daf5.png" sizes="152x152">
<link rel="icon" type="image/png" href="https://d3g6anj9jkury9.cloudfront.net/assets/favicons/favicon-16x16-c1207cd2f3a20fd50de0e585b4b307a3.png" sizes="16x16">
<link rel="icon" type="image/png" href="https://d3g6anj9jkury9.cloudfront.net/assets/favicons/favicon-32x32-e9b1d6ef3d96ed8918c54316cdea011f.png" sizes="32x32">
<link rel="icon" type="image/png" href="https://d3g6anj9jkury9.cloudfront.net/assets/favicons/favicon-96x96-842fcd3e7786576fc20d38bbf94837fc.png" sizes="96x96">
<link rel="icon" type="image/png" href="https://d3g6anj9jkury9.cloudfront.net/assets/favicons/favicon-128x128-e97066b91cc21b104c63bc7530ff819f.png" sizes="128x128">
<link rel="icon" type="image/png" href="https://d3g6anj9jkury9.cloudfront.net/assets/favicons/favicon-196x196-b8cab44cf725c4fa0aafdbd237cdc4ed.png" sizes="196x196">
<meta content="Leanpub" name="application-name">
<meta content="#ffffff" name="msapplication-TileColor">
<meta content="favicons/mstile-144x144.png" name="msapplication-TileImage">
<meta content="favicons/mstile-150x150.png" name="msapplication-square150x150logo">
<meta content="favicons/mstile-310x150.png" name="msapplication-wide310x150logo">
<meta content="favicons/mstile-310x310.png" name="msapplication-square310x310logo">
<meta content="favicons/mstile-70x70.png" name="msapplication-square70x70logo">

<title>Read What's New in Java 8 | Leanpub</title>
<link href="https://fonts.googleapis.com/" rel="dns-prefetch">
<script async="" src="./Read What&#39;s New in Java 8 _ Leanpub_files/uwt.js.download"></script><script type="text/javascript" async="" src="./Read What&#39;s New in Java 8 _ Leanpub_files/ec.js.download"></script><script async="" src="./Read What&#39;s New in Java 8 _ Leanpub_files/analytics.js.download"></script><script type="text/javascript" async="" src="./Read What&#39;s New in Java 8 _ Leanpub_files/recaptcha__en.js.download" crossorigin="anonymous" integrity="sha384-Cm1nQr6Xj7E/8hYK0ZQgt50B1y7qtncPBm9tQGQV453cb5N/2ou4jkkZbzQejCpR"></script><script src="./Read What&#39;s New in Java 8 _ Leanpub_files/webfont.js.download"></script>
<link rel="stylesheet" href="./Read What&#39;s New in Java 8 _ Leanpub_files/css" media="all"><script>
  if (typeof WebFont !== 'undefined') {
    WebFont.load({
      google: {
        families: [
          'Noto Sans:400,700,400i,700i',
          'Noto Serif:400,700,400i,700i',
        ]
      }
    });
  }
</script>

<link rel="stylesheet" media="screen" href="./Read What&#39;s New in Java 8 _ Leanpub_files/font_awesome-f7d95bde64062dd89b417f07c933597d.css">
<link rel="stylesheet" media="all" href="./Read What&#39;s New in Java 8 _ Leanpub_files/application-49e497cb6ef25e434249a42d0bca9da6.css">

<script>
  var _rollbarConfig = {
      accessToken: "3d279f41d3804636adbbba833c2c0d2d",
      captureUncaught: true,
      captureUnhandledRejections: true,
      code_version: "927a65afdd464ec56371a5895b6021d0aed145c3",
      payload: {
        environment: "production"
      }
  };
  // Rollbar Snippet
  !function(r){function o(n){if(e[n])return e[n].exports;var t=e[n]={exports:{},id:n,loaded:!1};return r[n].call(t.exports,t,t.exports,o),t.loaded=!0,t.exports}var e={};return o.m=r,o.c=e,o.p="",o(0)}([function(r,o,e){"use strict";var n=e(1),t=e(4);_rollbarConfig=_rollbarConfig||{},_rollbarConfig.rollbarJsUrl=_rollbarConfig.rollbarJsUrl||"https://cdnjs.cloudflare.com/ajax/libs/rollbar.js/2.5.2/rollbar.min.js",_rollbarConfig.async=void 0===_rollbarConfig.async||_rollbarConfig.async;var a=n.setupShim(window,_rollbarConfig),l=t(_rollbarConfig);window.rollbar=n.Rollbar,a.loadFull(window,document,!_rollbarConfig.async,_rollbarConfig,l)},function(r,o,e){"use strict";function n(r){return function(){try{return r.apply(this,arguments)}catch(r){try{console.error("[Rollbar]: Internal error",r)}catch(r){}}}}function t(r,o){this.options=r,this._rollbarOldOnError=null;var e=s++;this.shimId=function(){return e},"undefined"!=typeof window&&window._rollbarShims&&(window._rollbarShims[e]={handler:o,messages:[]})}function a(r,o){if(r){var e=o.globalAlias||"Rollbar";if("object"==typeof r[e])return r[e];r._rollbarShims={},r._rollbarWrappedError=null;var t=new p(o);return n(function(){o.captureUncaught&&(t._rollbarOldOnError=r.onerror,i.captureUncaughtExceptions(r,t,!0),i.wrapGlobals(r,t,!0)),o.captureUnhandledRejections&&i.captureUnhandledRejections(r,t,!0);var n=o.autoInstrument;return o.enabled!==!1&&(void 0===n||n===!0||"object"==typeof n&&n.network)&&r.addEventListener&&(r.addEventListener("load",t.captureLoad.bind(t)),r.addEventListener("DOMContentLoaded",t.captureDomContentLoaded.bind(t))),r[e]=t,t})()}}function l(r){return n(function(){var o=this,e=Array.prototype.slice.call(arguments,0),n={shim:o,method:r,args:e,ts:new Date};window._rollbarShims[this.shimId()].messages.push(n)})}var i=e(2),s=0,d=e(3),c=function(r,o){return new t(r,o)},p=function(r){return new d(c,r)};t.prototype.loadFull=function(r,o,e,t,a){var l=function(){var o;if(void 0===r._rollbarDidLoad){o=new Error("rollbar.js did not load");for(var e,n,t,l,i=0;e=r._rollbarShims[i++];)for(e=e.messages||[];n=e.shift();)for(t=n.args||[],i=0;i<t.length;++i)if(l=t[i],"function"==typeof l){l(o);break}}"function"==typeof a&&a(o)},i=!1,s=o.createElement("script"),d=o.getElementsByTagName("script")[0],c=d.parentNode;s.crossOrigin="",s.src=t.rollbarJsUrl,e||(s.async=!0),s.onload=s.onreadystatechange=n(function(){if(!(i||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState)){s.onload=s.onreadystatechange=null;try{c.removeChild(s)}catch(r){}i=!0,l()}}),c.insertBefore(s,d)},t.prototype.wrap=function(r,o,e){try{var n;if(n="function"==typeof o?o:function(){return o||{}},"function"!=typeof r)return r;if(r._isWrap)return r;if(!r._rollbar_wrapped&&(r._rollbar_wrapped=function(){e&&"function"==typeof e&&e.apply(this,arguments);try{return r.apply(this,arguments)}catch(e){var o=e;throw o&&("string"==typeof o&&(o=new String(o)),o._rollbarContext=n()||{},o._rollbarContext._wrappedSource=r.toString(),window._rollbarWrappedError=o),o}},r._rollbar_wrapped._isWrap=!0,r.hasOwnProperty))for(var t in r)r.hasOwnProperty(t)&&(r._rollbar_wrapped[t]=r[t]);return r._rollbar_wrapped}catch(o){return r}};for(var u="log,debug,info,warn,warning,error,critical,global,configure,handleUncaughtException,handleUnhandledRejection,captureEvent,captureDomContentLoaded,captureLoad".split(","),f=0;f<u.length;++f)t.prototype[u[f]]=l(u[f]);r.exports={setupShim:a,Rollbar:p}},function(r,o){"use strict";function e(r,o,e){if(r){var t;if("function"==typeof o._rollbarOldOnError)t=o._rollbarOldOnError;else if(r.onerror){for(t=r.onerror;t._rollbarOldOnError;)t=t._rollbarOldOnError;o._rollbarOldOnError=t}var a=function(){var e=Array.prototype.slice.call(arguments,0);n(r,o,t,e)};e&&(a._rollbarOldOnError=t),r.onerror=a}}function n(r,o,e,n){r._rollbarWrappedError&&(n[4]||(n[4]=r._rollbarWrappedError),n[5]||(n[5]=r._rollbarWrappedError._rollbarContext),r._rollbarWrappedError=null),o.handleUncaughtException.apply(o,n),e&&e.apply(r,n)}function t(r,o,e){if(r){"function"==typeof r._rollbarURH&&r._rollbarURH.belongsToShim&&r.removeEventListener("unhandledrejection",r._rollbarURH);var n=function(r){var e,n,t;try{e=r.reason}catch(r){e=void 0}try{n=r.promise}catch(r){n="[unhandledrejection] error getting `promise` from event"}try{t=r.detail,!e&&t&&(e=t.reason,n=t.promise)}catch(r){}e||(e="[unhandledrejection] error getting `reason` from event"),o&&o.handleUnhandledRejection&&o.handleUnhandledRejection(e,n)};n.belongsToShim=e,r._rollbarURH=n,r.addEventListener("unhandledrejection",n)}}function a(r,o,e){if(r){var n,t,a="EventTarget,Window,Node,ApplicationCache,AudioTrackList,ChannelMergerNode,CryptoOperation,EventSource,FileReader,HTMLUnknownElement,IDBDatabase,IDBRequest,IDBTransaction,KeyOperation,MediaController,MessagePort,ModalWindow,Notification,SVGElementInstance,Screen,TextTrack,TextTrackCue,TextTrackList,WebSocket,WebSocketWorker,Worker,XMLHttpRequest,XMLHttpRequestEventTarget,XMLHttpRequestUpload".split(",");for(n=0;n<a.length;++n)t=a[n],r[t]&&r[t].prototype&&l(o,r[t].prototype,e)}}function l(r,o,e){if(o.hasOwnProperty&&o.hasOwnProperty("addEventListener")){for(var n=o.addEventListener;n._rollbarOldAdd&&n.belongsToShim;)n=n._rollbarOldAdd;var t=function(o,e,t){n.call(this,o,r.wrap(e),t)};t._rollbarOldAdd=n,t.belongsToShim=e,o.addEventListener=t;for(var a=o.removeEventListener;a._rollbarOldRemove&&a.belongsToShim;)a=a._rollbarOldRemove;var l=function(r,o,e){a.call(this,r,o&&o._rollbar_wrapped||o,e)};l._rollbarOldRemove=a,l.belongsToShim=e,o.removeEventListener=l}}r.exports={captureUncaughtExceptions:e,captureUnhandledRejections:t,wrapGlobals:a}},function(r,o){"use strict";function e(r,o){this.impl=r(o,this),this.options=o,n(e.prototype)}function n(r){for(var o=function(r){return function(){var o=Array.prototype.slice.call(arguments,0);if(this.impl[r])return this.impl[r].apply(this.impl,o)}},e="log,debug,info,warn,warning,error,critical,global,configure,handleUncaughtException,handleUnhandledRejection,_createItem,wrap,loadFull,shimId,captureEvent,captureDomContentLoaded,captureLoad".split(","),n=0;n<e.length;n++)r[e[n]]=o(e[n])}e.prototype._swapAndProcessMessages=function(r,o){this.impl=r(this.options);for(var e,n,t;e=o.shift();)n=e.method,t=e.args,this[n]&&"function"==typeof this[n]&&("captureDomContentLoaded"===n||"captureLoad"===n?this[n].apply(this,[t[0],e.ts]):this[n].apply(this,t));return this},r.exports=e},function(r,o){"use strict";r.exports=function(r){return function(o){if(!o&&!window._rollbarInitialized){r=r||{};for(var e,n,t=r.globalAlias||"Rollbar",a=window.rollbar,l=function(r){return new a(r)},i=0;e=window._rollbarShims[i++];)n||(n=e.handler),e.handler._swapAndProcessMessages(l,e.messages);window[t]=n,window._rollbarInitialized=!0}}}}]);
  // End Rollbar Snippet
</script>

<script src="./Read What&#39;s New in Java 8 _ Leanpub_files/api.js.download"></script>
<script src="./Read What&#39;s New in Java 8 _ Leanpub_files/modernizr-6f6f590d4beb241834c7bf44f1147c87.js.download"></script>
<script src="./Read What&#39;s New in Java 8 _ Leanpub_files/jsapi"></script>
<script src="./Read What&#39;s New in Java 8 _ Leanpub_files/chartkick-ebce4400b12dc6a0bf57810075dd89ff.js.download"></script>
<link rel="stylesheet" media="screen" href="./Read What&#39;s New in Java 8 _ Leanpub_files/header-bundle-f706c910c3e3f1c26f1f.css">
<script src="./Read What&#39;s New in Java 8 _ Leanpub_files/MathJax.js.download" type="text/javascript"></script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  
  ga('create', 'UA-911230-9', 'auto');  // Replace with your property ID.
  ga('require', 'ec');
  
  // Visitor type parameters (only settable from non cached)
  
  
  
  
  ga('send', 'pageview');
</script>

<script src="./Read What&#39;s New in Java 8 _ Leanpub_files/js" type="text/javascript" async="true"></script><style></style><meta name="csrf-param" content="authenticity_token"><meta name="csrf-token" content="WMCgmfco3ArusJwOBtTRf1/WQsA8kp4urhsJyM2yPo11tFimfbR9D4Hl3SbH4lEf5qp58ejnfEDXbCDQMTR2Rg=="><style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Menu_Button .MathJax_Hover_Arrow {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 4px; -webkit-border-radius: 4px; -moz-border-radius: 4px; -khtml-border-radius: 4px; font-family: 'Courier New',Courier; font-size: 9px; color: #F0F0F0}
.MathJax_Menu_Button .MathJax_Hover_Arrow span {display: block; background-color: #AAA; border: 1px solid; border-radius: 3px; line-height: 0; padding: 4px}
.MathJax_Hover_Arrow:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_Hover_Arrow:hover span {background-color: #CCC!important}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_About.MathJax_MousePost {outline: none}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 2px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 2px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; padding-top: .25em; color: #666666; font-size: .75em}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: 1em}
.MathJax_MenuRadioCheck.RTL {right: 1em; left: auto}
.MathJax_MenuLabel {padding: 2px 2em 4px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #CCCCCC; margin: 4px 1px 0px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: Highlight; color: HighlightText}
.MathJax_MenuDisabled:focus, .MathJax_MenuLabel:focus {background-color: #E8E8E8}
.MathJax_ContextMenu:focus {outline: none}
.MathJax_ContextMenu .MathJax_MenuItem:focus {outline: none}
#MathJax_AboutClose {top: .2em; right: .2em}
.MathJax_Menu .MathJax_MenuClose {top: -10px; left: -10px}
.MathJax_MenuClose {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; font-family: 'Courier New',Courier; font-size: 24px; color: #F0F0F0}
.MathJax_MenuClose span {display: block; background-color: #AAA; border: 1.5px solid; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; line-height: 0; padding: 8px 0 6px}
.MathJax_MenuClose:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_MenuClose:hover span {background-color: #CCC!important}
.MathJax_MenuClose:hover:focus {outline: none}
</style><style type="text/css">.MathJax_Preview .MJXf-math {color: inherit!important}
</style><style type="text/css">.MJX_Assistive_MathML {position: absolute!important; top: 0; left: 0; clip: rect(1px, 1px, 1px, 1px); padding: 1px 0 0 0!important; border: 0!important; height: 1px!important; width: 1px!important; overflow: hidden!important; display: block!important; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none}
.MJX_Assistive_MathML.MJX_Assistive_MathML_Block {width: 100%!important}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; box-sizing: content-box; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><style type="text/css">.MJXp-script {font-size: .8em}
.MJXp-right {-webkit-transform-origin: right; -moz-transform-origin: right; -ms-transform-origin: right; -o-transform-origin: right; transform-origin: right}
.MJXp-bold {font-weight: bold}
.MJXp-italic {font-style: italic}
.MJXp-scr {font-family: MathJax_Script,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-frak {font-family: MathJax_Fraktur,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-sf {font-family: MathJax_SansSerif,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-cal {font-family: MathJax_Caligraphic,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-mono {font-family: MathJax_Typewriter,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-largeop {font-size: 150%}
.MJXp-largeop.MJXp-int {vertical-align: -.2em}
.MJXp-math {display: inline-block; line-height: 1.2; text-indent: 0; font-family: 'Times New Roman',Times,STIXGeneral,serif; white-space: nowrap; border-collapse: collapse}
.MJXp-display {display: block; text-align: center; margin: 1em 0}
.MJXp-math span {display: inline-block}
.MJXp-box {display: block!important; text-align: center}
.MJXp-box:after {content: " "}
.MJXp-rule {display: block!important; margin-top: .1em}
.MJXp-char {display: block!important}
.MJXp-mo {margin: 0 .15em}
.MJXp-mfrac {margin: 0 .125em; vertical-align: .25em}
.MJXp-denom {display: inline-table!important; width: 100%}
.MJXp-denom > * {display: table-row!important}
.MJXp-surd {vertical-align: top}
.MJXp-surd > * {display: block!important}
.MJXp-script-box > *  {display: table!important; height: 50%}
.MJXp-script-box > * > * {display: table-cell!important; vertical-align: top}
.MJXp-script-box > *:last-child > * {vertical-align: bottom}
.MJXp-script-box > * > * > * {display: block!important}
.MJXp-mphantom {visibility: hidden}
.MJXp-munderover {display: inline-table!important}
.MJXp-over {display: inline-block!important; text-align: center}
.MJXp-over > * {display: block!important}
.MJXp-munderover > * {display: table-row!important}
.MJXp-mtable {vertical-align: .25em; margin: 0 .125em}
.MJXp-mtable > * {display: inline-table!important; vertical-align: middle}
.MJXp-mtr {display: table-row!important}
.MJXp-mtd {display: table-cell!important; text-align: center; padding: .5em 0 0 .5em}
.MJXp-mtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-mlabeledtr {display: table-row!important}
.MJXp-mlabeledtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mlabeledtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MJXp-scale0 {-webkit-transform: scaleX(.0); -moz-transform: scaleX(.0); -ms-transform: scaleX(.0); -o-transform: scaleX(.0); transform: scaleX(.0)}
.MJXp-scale1 {-webkit-transform: scaleX(.1); -moz-transform: scaleX(.1); -ms-transform: scaleX(.1); -o-transform: scaleX(.1); transform: scaleX(.1)}
.MJXp-scale2 {-webkit-transform: scaleX(.2); -moz-transform: scaleX(.2); -ms-transform: scaleX(.2); -o-transform: scaleX(.2); transform: scaleX(.2)}
.MJXp-scale3 {-webkit-transform: scaleX(.3); -moz-transform: scaleX(.3); -ms-transform: scaleX(.3); -o-transform: scaleX(.3); transform: scaleX(.3)}
.MJXp-scale4 {-webkit-transform: scaleX(.4); -moz-transform: scaleX(.4); -ms-transform: scaleX(.4); -o-transform: scaleX(.4); transform: scaleX(.4)}
.MJXp-scale5 {-webkit-transform: scaleX(.5); -moz-transform: scaleX(.5); -ms-transform: scaleX(.5); -o-transform: scaleX(.5); transform: scaleX(.5)}
.MJXp-scale6 {-webkit-transform: scaleX(.6); -moz-transform: scaleX(.6); -ms-transform: scaleX(.6); -o-transform: scaleX(.6); transform: scaleX(.6)}
.MJXp-scale7 {-webkit-transform: scaleX(.7); -moz-transform: scaleX(.7); -ms-transform: scaleX(.7); -o-transform: scaleX(.7); transform: scaleX(.7)}
.MJXp-scale8 {-webkit-transform: scaleX(.8); -moz-transform: scaleX(.8); -ms-transform: scaleX(.8); -o-transform: scaleX(.8); transform: scaleX(.8)}
.MJXp-scale9 {-webkit-transform: scaleX(.9); -moz-transform: scaleX(.9); -ms-transform: scaleX(.9); -o-transform: scaleX(.9); transform: scaleX(.9)}
.MathJax_PHTML .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style><style type="text/css">.MathJax_Display {text-align: center; margin: 1em 0em; position: relative; display: block!important; text-indent: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; width: 100%}
.MathJax .merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MathJax .MJX-monospace {font-family: monospace}
.MathJax .MJX-sans-serif {font-family: sans-serif}
#MathJax_Tooltip {background-color: InfoBackground; color: InfoText; border: 1px solid black; box-shadow: 2px 2px 5px #AAAAAA; -webkit-box-shadow: 2px 2px 5px #AAAAAA; -moz-box-shadow: 2px 2px 5px #AAAAAA; -khtml-box-shadow: 2px 2px 5px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true'); padding: 3px 4px; z-index: 401; position: absolute; left: 0; top: 0; width: auto; height: auto; display: none}
.MathJax {display: inline; font-style: normal; font-weight: normal; line-height: normal; font-size: 100%; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; padding: 0; margin: 0}
.MathJax:focus, body :focus .MathJax {display: inline-table}
.MathJax img, .MathJax nobr, .MathJax a {border: 0; padding: 0; margin: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; vertical-align: 0; line-height: normal; text-decoration: none}
img.MathJax_strut {border: 0!important; padding: 0!important; margin: 0!important; vertical-align: 0!important}
.MathJax span {display: inline; position: static; border: 0; padding: 0; margin: 0; vertical-align: 0; line-height: normal; text-decoration: none}
.MathJax nobr {white-space: nowrap!important}
.MathJax img {display: inline!important; float: none!important}
.MathJax * {transition: none; -webkit-transition: none; -moz-transition: none; -ms-transition: none; -o-transition: none}
.MathJax_Processing {visibility: hidden; position: fixed; width: 0; height: 0; overflow: hidden}
.MathJax_Processed {display: none!important}
.MathJax_ExBox {display: block!important; overflow: hidden; width: 1px; height: 60ex; min-height: 0; max-height: none}
.MathJax .MathJax_EmBox {display: block!important; overflow: hidden; width: 1px; height: 60em; min-height: 0; max-height: none}
.MathJax .MathJax_HitBox {cursor: text; background: white; opacity: 0; filter: alpha(opacity=0)}
.MathJax .MathJax_HitBox * {filter: none; opacity: 1; background: transparent}
#MathJax_Tooltip * {filter: none; opacity: 1; background: transparent}
@font-face {font-family: MathJax_Main; src: url('https://leanpub.com/mathjax/fonts/HTML-CSS/TeX/woff/MathJax_Main-Regular.woff?rev=2.6.1') format('woff'), url('https://leanpub.com/mathjax/fonts/HTML-CSS/TeX/otf/MathJax_Main-Regular.otf?rev=2.6.1') format('opentype')}
@font-face {font-family: MathJax_Main-bold; src: url('https://leanpub.com/mathjax/fonts/HTML-CSS/TeX/woff/MathJax_Main-Bold.woff?rev=2.6.1') format('woff'), url('https://leanpub.com/mathjax/fonts/HTML-CSS/TeX/otf/MathJax_Main-Bold.otf?rev=2.6.1') format('opentype')}
@font-face {font-family: MathJax_Main-italic; src: url('https://leanpub.com/mathjax/fonts/HTML-CSS/TeX/woff/MathJax_Main-Italic.woff?rev=2.6.1') format('woff'), url('https://leanpub.com/mathjax/fonts/HTML-CSS/TeX/otf/MathJax_Main-Italic.otf?rev=2.6.1') format('opentype')}
@font-face {font-family: MathJax_Math-italic; src: url('https://leanpub.com/mathjax/fonts/HTML-CSS/TeX/woff/MathJax_Math-Italic.woff?rev=2.6.1') format('woff'), url('https://leanpub.com/mathjax/fonts/HTML-CSS/TeX/otf/MathJax_Math-Italic.otf?rev=2.6.1') format('opentype')}
@font-face {font-family: MathJax_Caligraphic; src: url('https://leanpub.com/mathjax/fonts/HTML-CSS/TeX/woff/MathJax_Caligraphic-Regular.woff?rev=2.6.1') format('woff'), url('https://leanpub.com/mathjax/fonts/HTML-CSS/TeX/otf/MathJax_Caligraphic-Regular.otf?rev=2.6.1') format('opentype')}
@font-face {font-family: MathJax_Size1; src: url('https://leanpub.com/mathjax/fonts/HTML-CSS/TeX/woff/MathJax_Size1-Regular.woff?rev=2.6.1') format('woff'), url('https://leanpub.com/mathjax/fonts/HTML-CSS/TeX/otf/MathJax_Size1-Regular.otf?rev=2.6.1') format('opentype')}
@font-face {font-family: MathJax_Size2; src: url('https://leanpub.com/mathjax/fonts/HTML-CSS/TeX/woff/MathJax_Size2-Regular.woff?rev=2.6.1') format('woff'), url('https://leanpub.com/mathjax/fonts/HTML-CSS/TeX/otf/MathJax_Size2-Regular.otf?rev=2.6.1') format('opentype')}
@font-face {font-family: MathJax_Size3; src: url('https://leanpub.com/mathjax/fonts/HTML-CSS/TeX/woff/MathJax_Size3-Regular.woff?rev=2.6.1') format('woff'), url('https://leanpub.com/mathjax/fonts/HTML-CSS/TeX/otf/MathJax_Size3-Regular.otf?rev=2.6.1') format('opentype')}
@font-face {font-family: MathJax_Size4; src: url('https://leanpub.com/mathjax/fonts/HTML-CSS/TeX/woff/MathJax_Size4-Regular.woff?rev=2.6.1') format('woff'), url('https://leanpub.com/mathjax/fonts/HTML-CSS/TeX/otf/MathJax_Size4-Regular.otf?rev=2.6.1') format('opentype')}
.MathJax .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style></head>
<body id="reads-show"><div id="MathJax_Message" style="display: none;"></div><div style="visibility: hidden; overflow: hidden; position: absolute; top: 0px; height: 1px; width: auto; padding: 0px; border: 0px; margin: 0px; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal;"><div id="MathJax_Hidden"></div></div>

<div class="flash" id="js-flash-prototype">
<div class="flash__progress-bar"></div>
<div class="container--large">
<div class="flash__message"></div>
<div class="flash__close-icon">

<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="25px" id="Layer_1" style="enable-background:new 0 0 512 512;" version="1.1" viewBox="0 0 512 512" width="25px" xml:space="preserve"><path d="M437.5,386.6L306.9,256l130.6-130.6c14.1-14.1,14.1-36.8,0-50.9c-14.1-14.1-36.8-14.1-50.9,0L256,205.1L125.4,74.5  c-14.1-14.1-36.8-14.1-50.9,0c-14.1,14.1-14.1,36.8,0,50.9L205.1,256L74.5,386.6c-14.1,14.1-14.1,36.8,0,50.9  c14.1,14.1,36.8,14.1,50.9,0L256,306.9l130.6,130.6c14.1,14.1,36.8,14.1,50.9,0C451.5,423.4,451.5,400.6,437.5,386.6z"></path></svg>

</div>
</div>
</div>


<script type="text/javascript">
  window.__menu_data__ = null
  window.__menuPath__ = null
  window.__hidesStoreContent__ = true
</script>

<div id="react-header-root"><section class="Header"><nav class="Header__Nav"><a class="Header__Nav__Logo" href="https://leanpub.com/"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABDCAYAAABjoACgAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABSRJREFUeNrsXP11mzAQx375P+oEYQOzQdig3iDOBHUnKBs4mYB0grgTQCYwmcBkAuMJXCk9xYqK0DfgoHvvHnl20En3ofsd5hRFgQIFChQoUKBBaOZz8NPphPAlwZxivsEcY6aftVGDuYLrK/xdzWaz2lB+DLIILxjZSHALlU3kvWEuQX5zMQbAi17iyy0oPXE0bAXKeJQZA5T+w5P8Fyx/O7owwotOMeeYDyf/VBB5gjkUPcg/wFrToZWOMK8w70/DEFF2AlwMNIc96AD1tgWBsDWEOYoC0dz1iPlBN1+YGCDHl5WDSdfAlJDDPVtlT2cVFQPb0hM2wL3ODVcGQnQnWsKCCaqp8QRLDeREk7kNvSdPVUQDe3sMqCnRlB97dx08wZ3CvrgBNOQq16w1c80e7kGO5rCENcnmsOsjB5wEXxF49rsNpjFenUA9kLRsO+yW9AJ/lyzsJAkPXzYduYd49098zxMHS1PGo6mn3suisQNm32FudTA85syn9yMRIhHAwo1CxMhoxyINmEPe8n859z9riezUUhci5IV8GiCVGQCUfvCEvzM2GuCzA0QGVXymKN+XAVKfBlgKhGbwfdID9iZenTDyEsY5dPKErQEywbhauW+uKVcGE/uoC8gc3rclvN0SVFOBAxSaKCT1OD9vMPS6A+ppC7ekHPDAraO6xATe/tLQkRMDjCECPhlhhFWxlhPOXUhk4NxiKs8eTCCsCwOkI4sAG7r1NG7adwSUpuH3BajsLQIUYVt4OqquK2cRUFFMPkFdV33mAJFVjxfq/S7qgKPt2HOHXhAiwHMEiFBDM+H9v7FFWC4jYBEiwG8EJIKC5GIjwPaBXMeva4kPAyCJB0wxB4iiADk1QAfEbEIN0J4HVGH53ML7CdUTrgE+6cA0ClQNIFLw24V7v4ta4M0mDziJgAnv/71FwEIiHAUDKOvMSwQsggEGyAHMOzuXGgHWvwl0vC7vPQewguNo2lR7iwB4sywKBtDfhjp0pxUBcVcBoiJkqsWYimPaGOD1C3h/6mic1yEM0ITtp58IuBF8XgUD/KcLVd05jYCboP8BcgB5J/MrRICLt5kZXfRmgCZAUKUosDNAR7NBFQyglgdkDRuyl3MThzVADUwmeozOxxLw8siEr6NzSxNy4JkVI7fmCqfKYwTQNZWmBkAWNQARqtydyNzDexDtVLyL1B97b0H21vScCcNaYKn7SMI0AkTbD1n4H1h406JI1FL8LMAjj5zHkpbWGhIc4QeIuFXU3iROxvgdtTRLw30xF1E0yl5anKDpSKy6lIBejBDCpqu9B9p0aEtozO57TGvnzvIogJw/DoDrBfvoEeO+X8G9e8t2qA2sBcnQlGCMjQ1EKyQG4JW+9nxuw6dDMkAm4pSQez6forX/WKWB0cQArd7L/Q/xjucBDupIucX3fWDHM9+QZ9K8PZMYQNSU/S36d2DH3cAw9AGu6wHn8JF7MB8EhdrMpQGaKPQBdEFRpGOAK4MS3VT5ZXQ+CozH4uzY9HixxGF00fqDHoMmqlrj6Hy0mskjCiTSpain7MqjN5QASUtNSLfloCs9lyE2UDo9v8IIUjI1yPfIX1+xUHhmmBytTpDqmI/q6Vx7HpY6kk+hrUmyz3wbIO/rp0nJvLKe5hBrwl0jAxQKnpZ5PR2kY2vgomE/xPupTEEoi8zChQH2gH3XY3gZFxa/A0YjmE8CunluMUihDUOZZzcun4s4NwLAvGak8xu9DgMFChQo0HD0V4ABAKiCSwHftnDCAAAAAElFTkSuQmCC" alt="Leanpub"></a><div class="Header__Middle"></div><button class="btn--plain DropdownContainer__Trigger "><div class="Header__Nav__Logo relative__nav__logo"><i class="HeaderIcon fa fa-bars"></i><i class="AccountItem__Trigger fa fa-caret-down"></i></div></button></nav></section></div>
<script>
  window.__BASE_URL__ = "https://leanpub.com/"
</script>
<script src="./Read What&#39;s New in Java 8 _ Leanpub_files/polyfill-bundle-acc99dd6624cb0c8933e.js.download"></script>
<script src="./Read What&#39;s New in Java 8 _ Leanpub_files/header-bundle-f706c910c3e3f1c26f1f.js.download"></script>

<div class="scroll-wrapper" id="scroll-wrapper">

<div class="main ruby-main">


<button class="toggle-sidebar btn btn--plain">
<div class="fa fa-list-ol"></div>
</button>
<div class="container--large" id="read-online" lang="en">
<header class="read-online-slidable">
<div class="read-upsell">
<a href="https://leanpub.com/whatsnewinjava8"><img alt="What&#39;s New in Java 8" src="./Read What&#39;s New in Java 8 _ Leanpub_files/s_shelf"></a>
<div class="upsell-text">
<div class="book-title">What's New in Java 8</div>
<div class="book-author">Adam L. Davis</div>
</div>
</div>
<a class="btn--solid" href="https://leanpub.com/whatsnewinjava8">Buy on Leanpub</a>
<hr>
</header>
<section class="read">
<div id="leanpub-toc">
<h2>Table of Contents</h2>
<ol class="toc">
<ul class="toc no-parts">
  <li>
    <a href="https://leanpub.com/whatsnewinjava8/read#leanpub-auto-preface">Preface</a>
  </li>
  <li>
    <a href="https://leanpub.com/whatsnewinjava8/read#leanpub-auto-overview"><span class="section-number">1. </span>Overview</a>
  </li>
  <li>
    <a href="https://leanpub.com/whatsnewinjava8/read#leanpub-auto-lambda-expressions"><span class="section-number">2. </span>Lambda Expressions</a>
    <ul>
      <li>
        <a href="https://leanpub.com/whatsnewinjava8/read#leanpub-auto-syntax"><span class="section-number">2.1 </span>Syntax</a>
      </li>
      <li>
        <a href="https://leanpub.com/whatsnewinjava8/read#leanpub-auto-scope"><span class="section-number">2.2 </span>Scope</a>
      </li>
      <li>
        <a href="https://leanpub.com/whatsnewinjava8/read#leanpub-auto-method-references"><span class="section-number">2.3 </span>Method references</a>
      </li>
      <li>
        <a href="https://leanpub.com/whatsnewinjava8/read#leanpub-auto-functional-interfaces"><span class="section-number">2.4 </span>Functional Interfaces</a>
      </li>
      <li>
        <a href="https://leanpub.com/whatsnewinjava8/read#leanpub-auto-comparisons-to-java-7"><span class="section-number">2.5 </span>Comparisons to Java 7</a>
      </li>
    </ul>
  </li>
  <li>
    <a href="https://leanpub.com/whatsnewinjava8/read#leanpub-auto-default-methods"><span class="section-number">3. </span>Default Methods</a>
    <ul>
      <li>
        <a href="https://leanpub.com/whatsnewinjava8/read#leanpub-auto-default-and-functional"><span class="section-number">3.1 </span>Default and Functional</a>
      </li>
      <li>
        <a href="https://leanpub.com/whatsnewinjava8/read#leanpub-auto-multiple-defaults"><span class="section-number">3.2 </span>Multiple Defaults</a>
      </li>
      <li>
        <a href="https://leanpub.com/whatsnewinjava8/read#leanpub-auto-static-methods-on-interface"><span class="section-number">3.3 </span>Static Methods on Interface</a>
      </li>
    </ul>
  </li>
  <li>
    <a href="https://leanpub.com/whatsnewinjava8/read#leanpub-auto-streams"><span class="section-number">4. </span>Streams</a>
    <ul>
      <li>
        <a href="https://leanpub.com/whatsnewinjava8/read#leanpub-auto-what-is-a-stream"><span class="section-number">4.1 </span>What is a Stream?</a>
      </li>
      <li>
        <a href="https://leanpub.com/whatsnewinjava8/read#leanpub-auto-generating-streams"><span class="section-number">4.2 </span>Generating Streams</a>
      </li>
      <li>
        <a href="https://leanpub.com/whatsnewinjava8/read#leanpub-auto-for-each"><span class="section-number">4.3 </span>For Each</a>
      </li>
      <li>
        <a href="https://leanpub.com/whatsnewinjava8/read#leanpub-auto-mapfilterreduce"><span class="section-number">4.4 </span>Map/Filter/Reduce</a>
      </li>
      <li>
        <a href="https://leanpub.com/whatsnewinjava8/read#leanpub-auto-parallel-array"><span class="section-number">4.5 </span>Parallel Array</a>
      </li>
      <li>
        <a href="https://leanpub.com/whatsnewinjava8/read#leanpub-auto-peek"><span class="section-number">4.6 </span>Peek</a>
      </li>
      <li>
        <a href="https://leanpub.com/whatsnewinjava8/read#leanpub-auto-limit"><span class="section-number">4.7 </span>Limit</a>
      </li>
      <li>
        <a href="https://leanpub.com/whatsnewinjava8/read#leanpub-auto-sort"><span class="section-number">4.8 </span>Sort</a>
      </li>
      <li>
        <a href="https://leanpub.com/whatsnewinjava8/read#leanpub-auto-collectors-and-statistics"><span class="section-number">4.9 </span>Collectors and Statistics</a>
      </li>
      <li>
        <a href="https://leanpub.com/whatsnewinjava8/read#leanpub-auto-grouping-and-partitioning"><span class="section-number">4.10 </span>Grouping and Partitioning</a>
      </li>
      <li>
        <a href="https://leanpub.com/whatsnewinjava8/read#leanpub-auto-comparisons-to-java-7-1"><span class="section-number">4.11 </span>Comparisons to Java 7</a>
      </li>
    </ul>
  </li>
  <li>
    <a href="https://leanpub.com/whatsnewinjava8/read#leanpub-auto-optional"><span class="section-number">5. </span>Optional</a>
  </li>
  <li>
    <a href="https://leanpub.com/whatsnewinjava8/read#leanpub-auto-nashorn"><span class="section-number">6. </span>Nashorn</a>
    <ul>
      <li>
        <a href="https://leanpub.com/whatsnewinjava8/read#leanpub-auto-jjs"><span class="section-number">6.1 </span>jjs</a>
      </li>
      <li>
        <a href="https://leanpub.com/whatsnewinjava8/read#leanpub-auto-scripting"><span class="section-number">6.2 </span>Scripting</a>
      </li>
      <li>
        <a href="https://leanpub.com/whatsnewinjava8/read#leanpub-auto-scriptengine"><span class="section-number">6.3 </span>ScriptEngine</a>
      </li>
      <li>
        <a href="https://leanpub.com/whatsnewinjava8/read#leanpub-auto-importing"><span class="section-number">6.4 </span>Importing</a>
      </li>
      <li>
        <a href="https://leanpub.com/whatsnewinjava8/read#leanpub-auto-extending"><span class="section-number">6.5 </span>Extending</a>
      </li>
      <li>
        <a href="https://leanpub.com/whatsnewinjava8/read#leanpub-auto-invocable"><span class="section-number">6.6 </span>Invocable</a>
      </li>
    </ul>
  </li>
  <li>
    <a href="https://leanpub.com/whatsnewinjava8/read#leanpub-endnotes">Notes</a>
  </li>
</ul>

</ol>
</div>
<div id="leanpub-main" class="kramdown">
<h2 id="leanpub-auto-preface">Preface</h2>

<p>Like many Java developers, the first time I heard about lambda expressions it piqued my interest. 
Also like many others, I was disappointed when it was set back. 
However, it is better late than never. </p>

<p>Java 8 is a giant step forward for the Java language. Writing this book has forced me to learn a lot more about it.
In Project Lambda, Java gets a new closure syntax, method-references, and default methods on interfaces. 
It manages to add many of the features of functional languages without losing the clarity and simplicity Java developers have come to expect.</p>

<p>Aside from Project Lambda, Java 8 also gets a new Date and Time API (JSR 310), the Nashorn JavaScript engine, and removes the Permanent Generation from the HotSpot virtual machine, among other changes.</p>

<p>I would like to acknowledge the following people for providing valuable resources:</p>

<ul>
  <li>Brian Goetz – <a href="http://cr.openjdk.java.net/~briangoetz/lambda/lambda-state-final.html">“State of the Lambda”</a>
</li>
  <li>Aleksey Shipilev – <a href="https://github.com/shipilev/jdk8-lambda-samples">jdk8-lambda-samples</a>
</li>
  <li>Richard Warburton – <a href="http://shop.oreilly.com/product/0636920030713.do">“Java 8 Lambdas”</a>
</li>
  <li>Julien Ponge – “Oracle Nashorn” in the Jan./Feb. 2014 issue of Java Magazine.</li>
  <li>Venkat Subramaniam – <a href="http://blog.agiledeveloper.com/">agiledeveloper.com</a>
</li>
  <li>All of the developers behind Java 8.</li>
  <li>The developers of Guava, joda-time, Groovy, and Scala.</li>
</ul>



<h2 id="leanpub-auto-overview">
<span class="section-number">1. </span>Overview</h2>

<p>This book is a short introduction to Java 8.
After reading it, you should have a basic understanding of the new features and be ready to start using it.</p>

<p>This book assumes that you have a good understanding of Java the language and the JVM.
If you’re not familiar with the language, including features of Java 7, it might be hard to follow some of the examples. 
For a more comprehensive introduction to programming in Java you should check out <a href="https://www.apress.com/us/book/9781484224892">Modern Programming Made Easy</a> or <a href="https://leanpub.com/modernjavasecondedition/">Modern Java: Second Edition</a>.</p>

<p>Java 8 includes the following:</p>

<ul>
  <li>Lambda expressions</li>
  <li>Method references</li>
  <li>Default Methods (Defender methods)</li>
  <li>A new Stream API.</li>
  <li>Optional</li>
  <li>A new Date/Time API.</li>
  <li>Nashorn, the new JavaScript engine</li>
  <li>Removal of the Permanent Generation</li>
  <li>and more…</li>
</ul>

<p>The best way to read this book is with a Java 8 supporting IDE running so you can try out the new features.</p>

<aside class="tip blurb">
    <p>Code examples can be found on <a href="https://github.com/adamd/hellojava8">github</a>.</p>

</aside>


<h2 id="leanpub-auto-lambda-expressions">
<span class="section-number">2. </span>Lambda Expressions</h2>

<p>The biggest new feature of Java 8 is language level support for <em>lambda expressions</em> (Project Lambda). 
A lambda expression is like syntactic sugar for an anonymous class<sup id="fnref-not"><a href="https://leanpub.com/whatsnewinjava8/read#fn-not" rel="footnote">1</a></sup> with one method whose type is inferred.
However, it will have enormous implications for simplifying development.</p>

<h3 id="leanpub-auto-syntax">
<span class="section-number">2.1 </span>Syntax</h3>

<p>The main syntax of a lambda expression is “parameters -&gt; body”.
The compiler can usually use the context of the lambda expression to determine the functional interface<sup id="fnref-fi"><a href="https://leanpub.com/whatsnewinjava8/read#fn-fi" rel="footnote">2</a></sup> being used and the types of the parameters.
There are four important rules to the syntax:</p>

<ul>
  <li>Declaring the types of the parameters is optional.</li>
  <li>Using parentheses around the parameter is optional if you have only one parameter. </li>
  <li>Using curly braces is optional (unless you need multiple statements).</li>
  <li>The “return” keyword is optional if you have a single expression that returns a value.</li>
</ul>

<p>Here are some examples of the syntax:</p>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno">1 </code><code class="o">()</code> <code class="o">-&gt;</code> <code class="n">System</code><code class="o">.</code><code class="na">out</code><code class="o">.</code><code class="na">println</code><code class="o">(</code><code class="k">this</code><code class="o">)</code>
<code class="lineno">2 </code><code class="o">(</code><code class="n">String</code> <code class="n">str</code><code class="o">)</code> <code class="o">-&gt;</code> <code class="n">System</code><code class="o">.</code><code class="na">out</code><code class="o">.</code><code class="na">println</code><code class="o">(</code><code class="n">str</code><code class="o">)</code>
<code class="lineno">3 </code><code class="n">str</code> <code class="o">-&gt;</code> <code class="n">System</code><code class="o">.</code><code class="na">out</code><code class="o">.</code><code class="na">println</code><code class="o">(</code><code class="n">str</code><code class="o">)</code>
<code class="lineno">4 </code><code class="o">(</code><code class="n">String</code> <code class="n">s1</code><code class="o">,</code> <code class="n">String</code> <code class="n">s2</code><code class="o">)</code> <code class="o">-&gt;</code> <code class="o">{</code> <code class="k">return</code> <code class="n">s2</code><code class="o">.</code><code class="na">length</code><code class="o">()</code> <code class="o">-</code> <code class="n">s1</code><code class="o">.</code><code class="na">length</code><code class="o">();</code> <code class="o">}</code>
<code class="lineno">5 </code><code class="o">(</code><code class="n">s1</code><code class="o">,</code> <code class="n">s2</code><code class="o">)</code> <code class="o">-&gt;</code> <code class="n">s2</code><code class="o">.</code><code class="na">length</code><code class="o">()</code> <code class="o">-</code> <code class="n">s1</code><code class="o">.</code><code class="na">length</code><code class="o">()</code>
</pre></div>

</figure>

<p>The last expression could be used to sort a list; for example:</p>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno">1 </code><code class="n">Arrays</code><code class="o">.</code><code class="na">sort</code><code class="o">(</code><code class="n">strArray</code><code class="o">,</code> 
<code class="lineno">2 </code>  <code class="o">(</code><code class="n">String</code> <code class="n">s1</code><code class="o">,</code> <code class="n">String</code> <code class="n">s2</code><code class="o">)</code> <code class="o">-&gt;</code> <code class="n">s2</code><code class="o">.</code><code class="na">length</code><code class="o">()</code> <code class="o">-</code> <code class="n">s1</code><code class="o">.</code><code class="na">length</code><code class="o">());</code>
</pre></div>

</figure>

<p>In this case the lambda expression implements the <code>Comparator</code> interface to sort strings by length.</p>

<h3 id="leanpub-auto-scope">
<span class="section-number">2.2 </span>Scope</h3>

<p>Here’s a short example of using lambdas with the Runnable interface:</p>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno"> 1 </code><code class="kn">import static</code> <code class="nn">java.lang.System.out</code><code class="o">;</code>
<code class="lineno"> 2 </code>
<code class="lineno"> 3 </code><code class="kd">public</code> <code class="kd">class</code> <code class="nc">Hello</code> <code class="o">{</code>
<code class="lineno"> 4 </code>	<code class="n">Runnable</code> <code class="n">r1</code> <code class="o">=</code> <code class="o">()</code> <code class="o">-&gt;</code> <code class="n">out</code><code class="o">.</code><code class="na">println</code><code class="o">(</code><code class="k">this</code><code class="o">);</code>
<code class="lineno"> 5 </code>	<code class="n">Runnable</code> <code class="n">r2</code> <code class="o">=</code> <code class="o">()</code> <code class="o">-&gt;</code> <code class="n">out</code><code class="o">.</code><code class="na">println</code><code class="o">(</code><code class="n">toString</code><code class="o">());</code>
<code class="lineno"> 6 </code>
<code class="lineno"> 7 </code>	<code class="kd">public</code> <code class="n">String</code> <code class="nf">toString</code><code class="o">()</code> <code class="o">{</code> <code class="k">return</code> <code class="s">"Hello, world!"</code><code class="o">;</code> <code class="o">}</code>
<code class="lineno"> 8 </code>
<code class="lineno"> 9 </code>	<code class="kd">public</code> <code class="kd">static</code> <code class="kt">void</code> <code class="nf">main</code><code class="o">(</code><code class="n">String</code><code class="o">...</code> <code class="n">args</code><code class="o">)</code> <code class="o">{</code>
<code class="lineno">10 </code>		<code class="k">new</code> <code class="n">Hello</code><code class="o">().</code><code class="na">r1</code><code class="o">.</code><code class="na">run</code><code class="o">();</code> <code class="c1">//Hello, world!</code>
<code class="lineno">11 </code>		<code class="k">new</code> <code class="n">Hello</code><code class="o">().</code><code class="na">r2</code><code class="o">.</code><code class="na">run</code><code class="o">();</code> <code class="c1">//Hello, world!</code>
<code class="lineno">12 </code>	<code class="o">}</code>
<code class="lineno">13 </code><code class="o">}</code>
</pre></div>

</figure>

<p>The important thing to note is both the r1 and r2 lambdas call the <code>toString()</code> method of the Hello class. This demonstrates the scope available to the lambda.</p>

<p>You can also refer to final variables or <em>effectively</em> final variables. A variable is effectively final if it is only assigned once.</p>

<p>For example, using Spring’s HibernateTemplate:</p>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno">1 </code><code class="n">String</code> <code class="n">sql</code> <code class="o">=</code> <code class="s">"delete * from User"</code><code class="o">;</code>
<code class="lineno">2 </code><code class="n">getHibernateTemplate</code><code class="o">().</code><code class="na">execute</code><code class="o">(</code><code class="n">session</code> <code class="o">-&gt;</code> 
<code class="lineno">3 </code>    <code class="n">session</code><code class="o">.</code><code class="na">createSQLQuery</code><code class="o">(</code><code class="n">sql</code><code class="o">).</code><code class="na">uniqueResult</code><code class="o">());</code>
</pre></div>

</figure>

<p>In the above, you can refer to the variable <code>sql</code> because it is only assigned once. 
If you were to assign to it a second time, it would cause a compilation error.</p>

<h3 id="leanpub-auto-method-references">
<span class="section-number">2.3 </span>Method references</h3>

<p>Since a lambda expression is like an object-less method, wouldn’t be nice if we could refer to existing methods instead of using a lamda expression? 
This is exactly what we can do with <em>method references</em>.</p>

<p>For example, imagine you frequently need to filter a list of Files based on file types. 
Assume you have the following set of methods for determining a file’s type:</p>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno">1 </code><code class="kd">public</code> <code class="kd">class</code> <code class="nc">FileFilters</code> <code class="o">{</code>
<code class="lineno">2 </code>	<code class="kd">public</code> <code class="kd">static</code> <code class="kt">boolean</code> <code class="nf">fileIsPdf</code><code class="o">(</code><code class="n">File</code> <code class="n">file</code><code class="o">)</code> <code class="o">{</code><code class="cm">/*code*/</code><code class="o">}</code>
<code class="lineno">3 </code>	<code class="kd">public</code> <code class="kd">static</code> <code class="kt">boolean</code> <code class="nf">fileIsTxt</code><code class="o">(</code><code class="n">File</code> <code class="n">file</code><code class="o">)</code> <code class="o">{</code><code class="cm">/*code*/</code><code class="o">}</code>
<code class="lineno">4 </code>	<code class="kd">public</code> <code class="kd">static</code> <code class="kt">boolean</code> <code class="nf">fileIsRtf</code><code class="o">(</code><code class="n">File</code> <code class="n">file</code><code class="o">)</code> <code class="o">{</code><code class="cm">/*code*/</code><code class="o">}</code>
<code class="lineno">5 </code><code class="o">}</code>
</pre></div>

</figure>

<p>Whenever you want to filter a list of files, you can use a method reference as in the following example 
(assuming you already defined a method <code>getFiles()</code> that returns a <code>Stream</code>):</p>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno">1 </code><code class="n">Stream</code><code class="o">&lt;</code><code class="n">File</code><code class="o">&gt;</code> <code class="n">pdfs</code> <code class="o">=</code> <code class="n">getFiles</code><code class="o">().</code><code class="na">filter</code><code class="o">(</code><code class="n">FileFilters</code><code class="o">::</code><code class="n">fileIsPdf</code><code class="o">);</code>
<code class="lineno">2 </code><code class="n">Stream</code><code class="o">&lt;</code><code class="n">File</code><code class="o">&gt;</code> <code class="n">txts</code> <code class="o">=</code> <code class="n">getFiles</code><code class="o">().</code><code class="na">filter</code><code class="o">(</code><code class="n">FileFilters</code><code class="o">::</code><code class="n">fileIsTxt</code><code class="o">);</code>
<code class="lineno">3 </code><code class="n">Stream</code><code class="o">&lt;</code><code class="n">File</code><code class="o">&gt;</code> <code class="n">rtfs</code> <code class="o">=</code> <code class="n">getFiles</code><code class="o">().</code><code class="na">filter</code><code class="o">(</code><code class="n">FileFilters</code><code class="o">::</code><code class="n">fileIsRtf</code><code class="o">);</code>
</pre></div>

</figure>

<p>Method references can point to:</p>

<ul>
  <li>Static methods.</li>
  <li>Instance methods.</li>
  <li>Methods on <em>particular</em> instances.</li>
  <li>Constructors (ie. <code>TreeSet::new</code>)</li>
</ul>

<p>For example, using the new <code>java.nio.file.Files.lines</code> method:</p>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno">1 </code><code class="n">Files</code><code class="o">.</code><code class="na">lines</code><code class="o">(</code><code class="n">Paths</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code class="s">"Nio.java"</code><code class="o">))</code>
<code class="lineno">2 </code>            <code class="o">.</code><code class="na">map</code><code class="o">(</code><code class="n">String</code><code class="o">::</code><code class="n">trim</code><code class="o">)</code>
<code class="lineno">3 </code>            <code class="o">.</code><code class="na">forEach</code><code class="o">(</code><code class="n">System</code><code class="o">.</code><code class="na">out</code><code class="o">::</code><code class="n">println</code><code class="o">);</code>
</pre></div>

</figure>

<p>The above reads the file “Nio.java”, calls <code>trim()</code> on every line, and then prints out the lines.</p>

<p>Notice that <code>System.out::println</code> refers to the <code>println</code> method on an instance of <code>PrintStream</code>.</p>

<h3 id="leanpub-auto-functional-interfaces">
<span class="section-number">2.4 </span>Functional Interfaces</h3>

<p>In Java 8 a <em>functional interface</em> is defined as an interface with exactly one abstract method.
This even applies to interfaces that were created with previous versions of Java.</p>

<p>Java 8 comes with several new functional interfaces in the package, <code>java.util.function</code>.</p>

<ul>
  <li>Function<code>&lt;T,R&gt;</code> - takes an object of type T and returns R.</li>
  <li>Supplier<code>&lt;T&gt;</code> - just returns an object of type T.</li>
  <li>Predicate<code>&lt;T&gt;</code> - returns a boolean value based on input of type T.</li>
  <li>Consumer<code>&lt;T&gt;</code> - performs an action with given object of type T.</li>
  <li>BiFunction - like Function but with two parameters.</li>
  <li>BiConsumer - like Consumer but with two parameters.</li>
</ul>

<p>It also comes with several corresponding interfaces for primitive types, such as:</p>

<ul>
  <li>IntConsumer</li>
  <li>IntFunction<code>&lt;R&gt;</code>
</li>
  <li>IntPredicate</li>
  <li>IntSupplier</li>
</ul>

<aside class="information blurb">
    <p>See the <a href="http://download.java.net/jdk8/docs/api/java/util/function/package-summary.html">java.util.function Javadocs</a> for more information.</p>

</aside>

<p>The coolest thing about functional interfaces is that they can be assigned to anything that would fulfill their contract.
Take the following code for example:</p>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno">1 </code><code class="n">Function</code><code class="o">&lt;</code><code class="n">String</code><code class="o">,</code> <code class="n">String</code><code class="o">&gt;</code> <code class="n">atr</code> <code class="o">=</code> <code class="o">(</code><code class="n">name</code><code class="o">)</code> <code class="o">-&gt;</code> <code class="o">{</code><code class="k">return</code> <code class="s">"@"</code> <code class="o">+</code> <code class="n">name</code><code class="o">;};</code>
<code class="lineno">2 </code><code class="n">Function</code><code class="o">&lt;</code><code class="n">String</code><code class="o">,</code> <code class="n">Integer</code><code class="o">&gt;</code> <code class="n">leng</code> <code class="o">=</code> <code class="o">(</code><code class="n">name</code><code class="o">)</code> <code class="o">-&gt;</code> <code class="n">name</code><code class="o">.</code><code class="na">length</code><code class="o">();</code>
<code class="lineno">3 </code><code class="n">Function</code><code class="o">&lt;</code><code class="n">String</code><code class="o">,</code> <code class="n">Integer</code><code class="o">&gt;</code> <code class="n">leng2</code> <code class="o">=</code> <code class="n">String</code><code class="o">::</code><code class="n">length</code><code class="o">;</code>
</pre></div>

</figure>

<p>This code is perfectly valid Java 8.
The first line defines a function that prepends “@” to a String.
The last two lines define functions that do the same thing: get the length of a String.</p>

<p>The Java compiler is smart enough to convert the method reference to String’s <code>length()</code> method into a <code>Function</code> (a functional interface) whose
<code>apply</code> method takes a String and returns an Integer.
For example:</p>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno">1 </code><code class="k">for</code> <code class="o">(</code><code class="n">String</code> <code class="n">s</code> <code class="o">:</code> <code class="n">args</code><code class="o">)</code> <code class="n">out</code><code class="o">.</code><code class="na">println</code><code class="o">(</code><code class="n">leng2</code><code class="o">.</code><code class="na">apply</code><code class="o">(</code><code class="n">s</code><code class="o">));</code>
</pre></div>

</figure>

<p>This would print out the lengths of the given strings.</p>

<p>Any interface can be functional interface, not merely those that come with Java.
To declare your intention that an interface is functional, use the <code>@FunctionalInterface</code> annotation.
Although not necessary, it will cause a compilation error if your interface does not satisfy the requirements (ie. one abstract method).</p>

<aside class="information blurb">
    <h4 id="leanpub-auto-github">Github</h4>
  <p>See <a href="https://github.com/katoquro/jdk8-lambda-samples">jdk8-lambda-samples</a> for more examples.</p>

</aside>


<h3 id="leanpub-auto-comparisons-to-java-7">
<span class="section-number">2.5 </span>Comparisons to Java 7</h3>

<p>To better illustrate the benefit of Lambda-expressions, here are some examples of how code from Java 7 can be shortened in Java 8.</p>

<h4 id="leanpub-auto-creating-an-actionlistener">Creating an ActionListener</h4>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno">1 </code><code class="c1">// Java 7</code>
<code class="lineno">2 </code><code class="n">ActionListener</code> <code class="n">al</code> <code class="o">=</code> <code class="k">new</code> <code class="n">ActionListener</code><code class="o">()</code> <code class="o">{</code>
<code class="lineno">3 </code>    <code class="nd">@Override</code>
<code class="lineno">4 </code>    <code class="kd">public</code> <code class="kt">void</code> <code class="nf">actionPerformed</code><code class="o">(</code><code class="n">ActionEvent</code> <code class="n">e</code><code class="o">)</code> <code class="o">{</code>
<code class="lineno">5 </code>        <code class="n">System</code><code class="o">.</code><code class="na">out</code><code class="o">.</code><code class="na">println</code><code class="o">(</code><code class="n">e</code><code class="o">.</code><code class="na">getActionCommand</code><code class="o">());</code>
<code class="lineno">6 </code>    <code class="o">}</code>
<code class="lineno">7 </code><code class="o">};</code>
<code class="lineno">8 </code><code class="c1">// Java 8</code>
<code class="lineno">9 </code><code class="n">ActionListener</code> <code class="n">al8</code> <code class="o">=</code> <code class="n">e</code> <code class="o">-&gt;</code> <code class="n">System</code><code class="o">.</code><code class="na">out</code><code class="o">.</code><code class="na">println</code><code class="o">(</code><code class="n">e</code><code class="o">.</code><code class="na">getActionCommand</code><code class="o">());</code>
</pre></div>

</figure>

<h4 id="leanpub-auto-printing-out-a-list-of-strings">Printing out a list of Strings</h4>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno">1 </code><code class="c1">// Java 7</code>
<code class="lineno">2 </code><code class="k">for</code> <code class="o">(</code><code class="n">String</code> <code class="n">s</code> <code class="o">:</code> <code class="n">list</code><code class="o">)</code> <code class="o">{</code>
<code class="lineno">3 </code>    <code class="n">System</code><code class="o">.</code><code class="na">out</code><code class="o">.</code><code class="na">println</code><code class="o">(</code><code class="n">s</code><code class="o">);</code>
<code class="lineno">4 </code><code class="o">}</code>
<code class="lineno">5 </code><code class="c1">//Java 8</code>
<code class="lineno">6 </code><code class="n">list</code><code class="o">.</code><code class="na">forEach</code><code class="o">(</code><code class="n">System</code><code class="o">.</code><code class="na">out</code><code class="o">::</code><code class="n">println</code><code class="o">);</code>
</pre></div>

</figure>

<h4 id="leanpub-auto-sorting-a-list-of-strings">Sorting a list of Strings</h4>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno"> 1 </code><code class="c1">// Java 7</code>
<code class="lineno"> 2 </code><code class="n">Collections</code><code class="o">.</code><code class="na">sort</code><code class="o">(</code><code class="n">list</code><code class="o">,</code> <code class="k">new</code> <code class="n">Comparator</code><code class="o">&lt;</code><code class="n">String</code><code class="o">&gt;()</code> <code class="o">{</code>
<code class="lineno"> 3 </code>    <code class="nd">@Override</code>
<code class="lineno"> 4 </code>    <code class="kd">public</code> <code class="kt">int</code> <code class="nf">compare</code><code class="o">(</code><code class="n">String</code> <code class="n">s1</code><code class="o">,</code> <code class="n">String</code> <code class="n">s2</code><code class="o">)</code> <code class="o">{</code>
<code class="lineno"> 5 </code>        <code class="k">return</code> <code class="n">s1</code><code class="o">.</code><code class="na">length</code><code class="o">()</code> <code class="o">-</code> <code class="n">s2</code><code class="o">.</code><code class="na">length</code><code class="o">();</code>
<code class="lineno"> 6 </code>    <code class="o">}</code>
<code class="lineno"> 7 </code><code class="o">});</code>
<code class="lineno"> 8 </code><code class="c1">//Java 8</code>
<code class="lineno"> 9 </code><code class="n">Collections</code><code class="o">.</code><code class="na">sort</code><code class="o">(</code><code class="n">list</code><code class="o">,</code> <code class="o">(</code><code class="n">s1</code><code class="o">,</code> <code class="n">s2</code><code class="o">)</code> <code class="o">-&gt;</code> <code class="n">s1</code><code class="o">.</code><code class="na">length</code><code class="o">()</code> <code class="o">-</code> <code class="n">s2</code><code class="o">.</code><code class="na">length</code><code class="o">());</code>
<code class="lineno">10 </code><code class="c1">// or</code>
<code class="lineno">11 </code><code class="n">list</code><code class="o">.</code><code class="na">sort</code><code class="o">(</code><code class="n">Comparator</code><code class="o">.</code><code class="na">comparingInt</code><code class="o">(</code><code class="n">String</code><code class="o">::</code><code class="n">length</code><code class="o">));</code>
</pre></div>

</figure>

<h4 id="leanpub-auto-sorting">Sorting</h4>

<p>For the sorting examples, assume you have the following <code>Person</code> class:</p>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno"> 1 </code><code class="kd">public</code> <code class="kd">static</code> <code class="kd">class</code> <code class="nc">Person</code> <code class="o">{</code>
<code class="lineno"> 2 </code>
<code class="lineno"> 3 </code>    <code class="n">String</code> <code class="n">firstName</code><code class="o">;</code>
<code class="lineno"> 4 </code>    <code class="n">String</code> <code class="n">lastName</code><code class="o">;</code>
<code class="lineno"> 5 </code>
<code class="lineno"> 6 </code>    <code class="kd">public</code> <code class="n">String</code> <code class="nf">getFirstName</code><code class="o">()</code> <code class="o">{</code>
<code class="lineno"> 7 </code>        <code class="k">return</code> <code class="n">firstName</code><code class="o">;</code>
<code class="lineno"> 8 </code>    <code class="o">}</code>
<code class="lineno"> 9 </code>
<code class="lineno">10 </code>    <code class="kd">public</code> <code class="n">String</code> <code class="nf">getLastName</code><code class="o">()</code> <code class="o">{</code>
<code class="lineno">11 </code>        <code class="k">return</code> <code class="n">lastName</code><code class="o">;</code>
<code class="lineno">12 </code>    <code class="o">}</code>
<code class="lineno">13 </code><code class="o">}</code>
</pre></div>

</figure>

<p>Here’s how you might sort this list in Java 7 by last-name and then first-name:</p>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno"> 1 </code><code class="n">Collections</code><code class="o">.</code><code class="na">sort</code><code class="o">(</code><code class="n">list</code><code class="o">,</code> <code class="k">new</code> <code class="n">Comparator</code><code class="o">&lt;</code><code class="n">Person</code><code class="o">&gt;()</code> <code class="o">{</code>
<code class="lineno"> 2 </code>    <code class="nd">@Override</code>
<code class="lineno"> 3 </code>    <code class="kd">public</code> <code class="kt">int</code> <code class="nf">compare</code><code class="o">(</code><code class="n">Person</code> <code class="n">p1</code><code class="o">,</code> <code class="n">Person</code> <code class="n">p2</code><code class="o">)</code> <code class="o">{</code>
<code class="lineno"> 4 </code>        <code class="kt">int</code> <code class="n">n</code> <code class="o">=</code> <code class="n">p1</code><code class="o">.</code><code class="na">getLastName</code><code class="o">().</code><code class="na">compareTo</code><code class="o">(</code><code class="n">p2</code><code class="o">.</code><code class="na">getLastName</code><code class="o">());</code>
<code class="lineno"> 5 </code>        <code class="k">if</code> <code class="o">(</code><code class="n">n</code> <code class="o">==</code> <code class="mi">0</code><code class="o">)</code> <code class="o">{</code>
<code class="lineno"> 6 </code>            <code class="k">return</code> <code class="n">p1</code><code class="o">.</code><code class="na">getFirstName</code><code class="o">().</code><code class="na">compareTo</code><code class="o">(</code><code class="n">p2</code><code class="o">.</code><code class="na">getFirstName</code><code class="o">());</code>
<code class="lineno"> 7 </code>        <code class="o">}</code>
<code class="lineno"> 8 </code>        <code class="k">return</code> <code class="n">n</code><code class="o">;</code>
<code class="lineno"> 9 </code>    <code class="o">}</code>
<code class="lineno">10 </code><code class="o">});</code>
</pre></div>

</figure>

<p>In Java 8, this can be shortened to the following:</p>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno">1 </code><code class="n">list</code><code class="o">.</code><code class="na">sort</code><code class="o">(</code><code class="n">Comparator</code><code class="o">.</code><code class="na">comparing</code><code class="o">(</code><code class="n">Person</code><code class="o">::</code><code class="n">getLastName</code><code class="o">)</code>
<code class="lineno">2 </code>        <code class="o">.</code><code class="na">thenComparing</code><code class="o">(</code><code class="n">Person</code><code class="o">::</code><code class="n">getFirstName</code><code class="o">));</code>
</pre></div>

</figure>

<aside class="tip blurb">
    <p>This example uses a static method on an interface (<code>comparing</code>) and a default method (<code>thenComparing</code>) which are discussed in the next chapter.</p>

</aside>


<h2 id="leanpub-auto-default-methods">
<span class="section-number">3. </span>Default Methods</h2>

<p>In order to add the <code>stream</code> method (or any others) to the core Collections API, Java needed another new feature, <em>Default methods</em> (also known as <em>Defender Methods</em> or <em>Virtual Extension methods</em>). 
This way they could add new methods to the <code>List</code> interface for example without breaking all the existing implementations (backwards compatibility).</p>

<p>Default methods can be added to any interface. Like the name implies, any class that implements the interface but does not override the method will get the default implementation.</p>

<p>For example, the <code>stream</code> method in the <code>Collection</code> interface is defined something like the following:</p>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno">1 </code><code class="k">default</code> <code class="kd">public</code> <code class="n">Stream</code> <code class="nf">stream</code><code class="o">()</code> <code class="o">{</code>
<code class="lineno">2 </code>	<code class="k">return</code> <code class="n">StreamSupport</code><code class="o">.</code><code class="na">stream</code><code class="o">(</code><code class="n">spliterator</code><code class="o">());</code>
<code class="lineno">3 </code><code class="o">}</code>
</pre></div>

</figure>

<aside class="information blurb">
    <p>See <a href="http://download.java.net/jdk8/docs/api/java/util/Collection.html#spliterator--">the Java docs</a> for more on Spliterators.</p>

</aside>

<p>You can always override a default method if you need different behavior.</p>

<h3 id="leanpub-auto-default-and-functional">
<span class="section-number">3.1 </span>Default and Functional</h3>

<p>An interface can have one or more default methods and still be functional.</p>

<p>For example, take a look at the Iterable interface:</p>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno"> 1 </code><code class="nd">@FunctionalInterface</code>
<code class="lineno"> 2 </code><code class="kd">public</code> <code class="kd">interface</code> <code class="nc">Iterable</code> <code class="o">{</code>
<code class="lineno"> 3 </code>	<code class="n">Iterator</code> <code class="nf">iterator</code><code class="o">();</code>
<code class="lineno"> 4 </code>	<code class="k">default</code> <code class="kt">void</code> <code class="nf">forEach</code><code class="o">(</code><code class="n">Consumer</code><code class="o">&lt;?</code> <code class="kd">super</code> <code class="n">T</code><code class="o">&gt;</code> <code class="n">action</code><code class="o">)</code> <code class="o">{</code>
<code class="lineno"> 5 </code>		<code class="n">Objects</code><code class="o">.</code><code class="na">requireNonNull</code><code class="o">(</code><code class="n">action</code><code class="o">);</code>
<code class="lineno"> 6 </code>		<code class="k">for</code> <code class="o">(</code><code class="n">T</code> <code class="n">t</code> <code class="o">:</code> <code class="k">this</code><code class="o">)</code> <code class="o">{</code>
<code class="lineno"> 7 </code>			<code class="n">action</code><code class="o">.</code><code class="na">accept</code><code class="o">(</code><code class="n">t</code><code class="o">);</code>
<code class="lineno"> 8 </code>		<code class="o">}</code>
<code class="lineno"> 9 </code>	<code class="o">}</code>
<code class="lineno">10 </code><code class="o">}</code>
</pre></div>

</figure>

<p>It has both the <code>iterator()</code> method and the <code>forEach</code> method.</p>

<h3 id="leanpub-auto-multiple-defaults">
<span class="section-number">3.2 </span>Multiple Defaults</h3>

<p>In the unlikely case that your class implements two or more interfaces that define the same default method, Java will throw a compilation error.
You will need to override the method and choose from one of the methods.
For example:</p>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno"> 1 </code><code class="kd">interface</code> <code class="nc">Foo</code> <code class="o">{</code>
<code class="lineno"> 2 </code>	<code class="k">default</code> <code class="kt">void</code> <code class="nf">talk</code><code class="o">()</code> <code class="o">{</code>
<code class="lineno"> 3 </code>		<code class="n">out</code><code class="o">.</code><code class="na">println</code><code class="o">(</code><code class="s">"Foo!"</code><code class="o">);</code>
<code class="lineno"> 4 </code>	<code class="o">}</code>
<code class="lineno"> 5 </code><code class="o">}</code>
<code class="lineno"> 6 </code><code class="kd">interface</code> <code class="nc">Bar</code> <code class="o">{</code>
<code class="lineno"> 7 </code>	<code class="k">default</code> <code class="kt">void</code> <code class="nf">talk</code><code class="o">()</code> <code class="o">{</code>
<code class="lineno"> 8 </code>		<code class="n">out</code><code class="o">.</code><code class="na">println</code><code class="o">(</code><code class="s">"Bar!"</code><code class="o">);</code>
<code class="lineno"> 9 </code>	<code class="o">}</code>
<code class="lineno">10 </code><code class="o">}</code>
<code class="lineno">11 </code><code class="kd">class</code> <code class="nc">FooBar</code> <code class="kd">implements</code> <code class="n">Foo</code><code class="o">,</code> <code class="n">Bar</code> <code class="o">{</code>
<code class="lineno">12 </code>	<code class="nd">@Override</code>
<code class="lineno">13 </code>	<code class="kt">void</code> <code class="nf">talk</code><code class="o">()</code> <code class="o">{</code> <code class="n">Foo</code><code class="o">.</code><code class="na">super</code><code class="o">.</code><code class="na">talk</code><code class="o">();</code> <code class="o">}</code>			
<code class="lineno">14 </code><code class="o">}</code>
</pre></div>

</figure>

<p>In the above code, <code>talk</code> is overridden and calls <code>Foo</code>’s talk method.
This is similar to the way you refer to a super class in pre-Java-8.</p>

<h3 id="leanpub-auto-static-methods-on-interface">
<span class="section-number">3.3 </span>Static Methods on Interface</h3>

<p>Although not strictly related to default methods, the ability to add static methods to interfaces is a similar change to the Java language.</p>

<p>For example, there are many static methods on the new <em>Stream</em> interface.
This makes “helper” methods easier to find since they can be located directly on the interface, instead of a different class such as <em>StreamUtil</em> or <em>Streams</em>.</p>

<p>Here’s an example in the new <em>Stream</em> interface:</p>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno">1 </code><code class="kd">public</code> <code class="kd">static</code><code class="o">&lt;</code><code class="n">T</code><code class="o">&gt;</code> <code class="n">Stream</code><code class="o">&lt;</code><code class="n">T</code><code class="o">&gt;</code> <code class="nf">of</code><code class="o">(</code><code class="n">T</code><code class="o">...</code> <code class="n">values</code><code class="o">)</code> <code class="o">{</code>
<code class="lineno">2 </code>    <code class="k">return</code> <code class="n">Arrays</code><code class="o">.</code><code class="na">stream</code><code class="o">(</code><code class="n">values</code><code class="o">);</code>
<code class="lineno">3 </code><code class="o">}</code>
</pre></div>

</figure>

<p>The above method creates a new stream based on the given values.</p>


<h2 id="leanpub-auto-streams">
<span class="section-number">4. </span>Streams</h2>

<p>The <code>Stream</code> interface is such a fundamental part of Java 8 it deserves its own chapter.</p>

<h3 id="leanpub-auto-what-is-a-stream">
<span class="section-number">4.1 </span>What is a Stream?</h3>

<p>The <code>Stream</code> interface is located in the <code>java.util.stream</code> package.
It represents a sequence of objects somewhat like the Iterator interface.
However, unlike the Iterator, it supports parallel execution.</p>

<p>The Stream interface supports the map/filter/reduce pattern and executes lazily,
forming the basis (along with lambdas) for functional-style programming in Java 8.</p>

<p>There are also corresponding primitive streams (IntStream, DoubleStream, and LongStream)
for performance reasons.</p>

<h3 id="leanpub-auto-generating-streams">
<span class="section-number">4.2 </span>Generating Streams</h3>

<p>There are many ways to create a Stream in Java 8.
Many of the existing Java core library classes have Stream returning methods in Java 8.</p>

<h4 id="leanpub-auto-streaming-collections">Streaming Collections</h4>

<p>The most obvious way to create a stream is from a <code>Collection</code>.</p>

<p>The Collection interface has two default methods on it for creating streams:</p>

<ul>
  <li>stream(): Returns a sequential Stream with the collection as its source.</li>
  <li>parallelStream(): Returns a possibly parallel Stream with the collection as its source.</li>
</ul>

<p>The ordering of the Stream relies on the underlying collection just like an Iterator.</p>

<h4 id="leanpub-auto-streaming-files">Streaming Files</h4>

<p>The <code>BufferedReader</code> now has the <code>lines()</code> method which returns a Stream; for example<sup id="fnref-catch"><a href="https://leanpub.com/whatsnewinjava8/read#fn-catch" rel="footnote">3</a></sup>:</p>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno">1 </code><code class="k">try</code> <code class="o">(</code><code class="n">FileReader</code> <code class="n">fr</code> <code class="o">=</code> <code class="k">new</code> <code class="n">FileReader</code><code class="o">(</code><code class="s">"file"</code><code class="o">);</code>
<code class="lineno">2 </code>    <code class="n">BufferedReader</code> <code class="n">br</code> <code class="o">=</code> <code class="k">new</code> <code class="n">BufferedReader</code><code class="o">(</code><code class="n">fr</code><code class="o">))</code> <code class="o">{</code>
<code class="lineno">3 </code>    <code class="n">br</code><code class="o">.</code><code class="na">lines</code><code class="o">().</code><code class="na">forEach</code><code class="o">(</code><code class="n">System</code><code class="o">.</code><code class="na">out</code><code class="o">::</code><code class="n">println</code><code class="o">);</code>
<code class="lineno">4 </code><code class="o">}</code>
</pre></div>

</figure>

<p>You can also read a file as a Stream using <code>Files.lines(Path filePath)</code>; for example:</p>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno">1 </code><code class="k">try</code> <code class="o">(</code><code class="n">Stream</code> <code class="n">st</code> <code class="o">=</code> <code class="n">Files</code><code class="o">.</code><code class="na">lines</code><code class="o">(</code><code class="n">Paths</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code class="s">"file"</code><code class="o">)))</code> <code class="o">{</code>
<code class="lineno">2 </code>    <code class="n">st</code><code class="o">.</code><code class="na">forEach</code><code class="o">(</code><code class="n">System</code><code class="o">.</code><code class="na">out</code><code class="o">::</code><code class="n">println</code><code class="o">);</code>
<code class="lineno">3 </code><code class="o">}</code>
</pre></div>

</figure>

<p>Note this populates lazily; it does not read the entire file when you call it.</p>

<aside class="warning blurb">
    <p>Files.lines(Path): Any <code>IOException</code> that is thrown while processing the file (after the file is opened) will get wrapped in an <code>UncheckedIOException</code> and thrown.</p>

</aside>

<h4 id="leanpub-auto-streaming-file-trees">Streaming File Trees</h4>

<p>There are several static methods on the <code>Files</code> class for navigating file trees using a Stream.</p>

<ul>
  <li>
<code>list(Path dir)</code> – Stream of files in the given directory.</li>
  <li>
<code>walk(Path dir)</code><sup id="fnref-walk"><a href="https://leanpub.com/whatsnewinjava8/read#fn-walk" rel="footnote">4</a></sup> – Stream that traverses the file tree depth-first starting at the given directory.</li>
  <li>
<code>walk(Path dir, int maxDepth)</code> – Same as walk(dir) but with a maximum depth.</li>
</ul>

<h4 id="leanpub-auto-streaming-text-patterns">Streaming Text Patterns</h4>

<p>The <a href="http://download.java.net/jdk8/docs/api/java/util/regex/Pattern.html">Pattern</a> class now has a method, <code>splitAsStream(CharSequence)</code>, which creates a Stream.</p>

<p>For example:</p>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno">1 </code><code class="kn">import</code> <code class="nn">java.util.regex.Pattern</code><code class="o">;</code>
<code class="lineno">2 </code><code class="c1">// later on...</code>
<code class="lineno">3 </code><code class="n">Pattern</code> <code class="n">patt</code> <code class="o">=</code> <code class="n">Pattern</code><code class="o">.</code><code class="na">compile</code><code class="o">(</code><code class="s">","</code><code class="o">);</code>
<code class="lineno">4 </code><code class="n">patt</code><code class="o">.</code><code class="na">splitAsStream</code><code class="o">(</code><code class="s">"a,b,c"</code><code class="o">)</code>
<code class="lineno">5 </code>    <code class="o">.</code><code class="na">forEach</code><code class="o">(</code><code class="n">System</code><code class="o">.</code><code class="na">out</code><code class="o">::</code><code class="n">println</code><code class="o">);</code>
</pre></div>

</figure>

<p>The above uses a very simple pattern, a comma, and splits the text into a stream and prints it out.
This would produce the following output:</p>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno">1 </code><code class="n">a</code>
<code class="lineno">2 </code><code class="n">b</code>
<code class="lineno">3 </code><code class="n">c</code>
</pre></div>

</figure>

<h4 id="leanpub-auto-infinite-streams">Infinite Streams</h4>

<p>Using the <code>generate</code> or <code>iterate</code> static methods on Stream, you can create a Stream of values including never ending streams.
For example, you could call generate in the following way to create an infinite supply of objects:</p>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno">1 </code><code class="n">Stream</code><code class="o">.</code><code class="na">generate</code><code class="o">(()</code> <code class="o">-&gt;</code> <code class="k">new</code> <code class="n">Dragon</code><code class="o">());</code>
</pre></div>

</figure>

<p>For example, you could use this technique to produce a stream of CPU load or memory usage.
However, you should use this with caution. It is similar to an infinite loop.</p>

<p>You could also use <code>generate</code> to create an infinite random number supply; for example:</p>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno">1 </code><code class="n">Stream</code><code class="o">.</code><code class="na">generate</code><code class="o">(()</code> <code class="o">-&gt;</code> <code class="n">Math</code><code class="o">.</code><code class="na">random</code><code class="o">());</code>
</pre></div>

</figure>

<p>However, the <code>java.util.Random</code> class does this for you with the following new methods: <code>ints()</code>, <code>longs()</code>, and <code>doubles()</code>.
Each of those methods is overloaded with definitions similar to the following:</p>

<ul>
  <li>
<code>ints()</code>: An infinite Stream of random integers.</li>
  <li>
<code>ints(int n, int m)</code>: An infinite Stream of random integers from n (inclusive) to m (exclusive).</li>
  <li>
<code>ints(long size)</code>: A Stream of given size of random integers.</li>
  <li>
<code>ints(long size, int n, int m)</code>: A Stream of given size of random integers with given bounds.</li>
</ul>

<p>The <code>iterate</code> method is similar to <code>generate</code> except it takes an initial value and a Function that modifies that value.
For example, you can iterate over the Integers using the following code:</p>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno">1 </code><code class="n">Stream</code><code class="o">.</code><code class="na">iterate</code><code class="o">(</code><code class="mi">1</code><code class="o">,</code> <code class="n">i</code> <code class="o">-&gt;</code> <code class="n">i</code><code class="o">+</code><code class="mi">1</code><code class="o">)</code>
<code class="lineno">2 </code>    <code class="o">.</code><code class="na">forEach</code><code class="o">(</code><code class="n">System</code><code class="o">.</code><code class="na">out</code><code class="o">::</code><code class="n">print</code><code class="o">);</code>
</pre></div>

</figure>

<p>This would print out “1234…” continuously until you stop the program.</p>

<aside class="tip blurb">
    <p>There are ways to limit an infinite stream which we will cover later (<code>filter</code> and <code>limit</code>).</p>

</aside>

<h4 id="leanpub-auto-ranges">Ranges</h4>

<p>There are also new methods for creating ranges of numbers as Streams.</p>

<p>For example, the static method, <code>range</code>, on the <code>IntStream</code> interface:</p>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno">1 </code><code class="n">IntStream</code><code class="o">.</code><code class="na">range</code><code class="o">(</code><code class="mi">1</code><code class="o">,</code> <code class="mi">11</code><code class="o">)</code>
<code class="lineno">2 </code>    <code class="o">.</code><code class="na">forEach</code><code class="o">(</code><code class="n">System</code><code class="o">.</code><code class="na">out</code><code class="o">::</code><code class="n">println</code><code class="o">);</code>
</pre></div>

</figure>

<p>The above would print out the numbers one through ten.</p>

<p>Each primitive Stream (IntStream, DoubleStream, and LongStream) has a corresponding <code>range</code> method.</p>

<h4 id="leanpub-auto-streaming-anything">Streaming Anything</h4>

<p>You can create a Stream from any number of elements or an array using the two following methods:</p>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno">1 </code><code class="n">Stream</code><code class="o">&lt;</code><code class="n">Integer</code><code class="o">&gt;</code> <code class="n">s</code> <code class="o">=</code> <code class="n">Stream</code><code class="o">.</code><code class="na">of</code><code class="o">(</code><code class="mi">1</code><code class="o">,</code> <code class="mi">2</code><code class="o">,</code> <code class="mi">3</code><code class="o">);</code>
<code class="lineno">2 </code><code class="n">Stream</code><code class="o">&lt;</code><code class="n">Object</code><code class="o">&gt;</code> <code class="n">s2</code> <code class="o">=</code> <code class="n">Arrays</code><code class="o">.</code><code class="na">stream</code><code class="o">(</code><code class="n">array</code><code class="o">);</code>
</pre></div>

</figure>

<p><code>Stream.of</code> can take any number of parameters of any type.</p>

<h3 id="leanpub-auto-for-each">
<span class="section-number">4.3 </span>For Each</h3>

<p>The most basic thing you can do with a Stream is loop through it using the <code>forEach</code> method.</p>

<p>For example, to print out all of the files in the current directory, you could do the following:</p>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno">1 </code><code class="n">Files</code><code class="o">.</code><code class="na">list</code><code class="o">(</code><code class="n">Paths</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code class="s">"."</code><code class="o">))</code>
<code class="lineno">2 </code>    <code class="o">.</code><code class="na">forEach</code><code class="o">(</code><code class="n">System</code><code class="o">.</code><code class="na">out</code><code class="o">::</code><code class="n">println</code><code class="o">);</code>
</pre></div>

</figure>

<p>For the most part, this replaces the “for loop”. 
It is more concise, and more object-oriented since you are delegating the implementation of the actual loop.</p>


<h3 id="leanpub-auto-mapfilterreduce">
<span class="section-number">4.4 </span>Map/Filter/Reduce</h3>

<p>Lambda expressions and default methods allow us to implement map/filter/reduce in Java 8. 
Actually it is already implemented for us in the standard library.</p>

<p>For example, imagine you want to get the current point scores from a list of player-names and find the player with the most points.
You have a simple class, <code>PlayerPoints</code>, and a <code>getPoints</code> method defined as the following:</p>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno"> 1 </code><code class="kd">public</code> <code class="kd">static</code> <code class="kd">class</code> <code class="nc">PlayerPoints</code> <code class="o">{</code>
<code class="lineno"> 2 </code> <code class="kd">public</code> <code class="kd">final</code> <code class="n">String</code> <code class="n">name</code><code class="o">;</code>
<code class="lineno"> 3 </code> <code class="kd">public</code> <code class="kd">final</code> <code class="kt">long</code> <code class="n">points</code><code class="o">;</code>
<code class="lineno"> 4 </code> 
<code class="lineno"> 5 </code> <code class="kd">public</code> <code class="nf">PlayerPoints</code><code class="o">(</code><code class="n">String</code> <code class="n">name</code><code class="o">,</code> <code class="kt">long</code> <code class="n">points</code><code class="o">)</code> <code class="o">{</code>
<code class="lineno"> 6 </code>   <code class="k">this</code><code class="o">.</code><code class="na">name</code> <code class="o">=</code> <code class="n">name</code><code class="o">;</code>
<code class="lineno"> 7 </code>   <code class="k">this</code><code class="o">.</code><code class="na">points</code> <code class="o">=</code> <code class="n">points</code><code class="o">;</code>
<code class="lineno"> 8 </code> <code class="o">}</code> 
<code class="lineno"> 9 </code> 
<code class="lineno">10 </code> <code class="kd">public</code> <code class="n">String</code> <code class="nf">toString</code><code class="o">()</code> <code class="o">{</code>
<code class="lineno">11 </code>   <code class="k">return</code> <code class="n">name</code> <code class="o">+</code> <code class="s">":"</code> <code class="o">+</code> <code class="n">points</code><code class="o">;</code>
<code class="lineno">12 </code> <code class="o">}</code>
<code class="lineno">13 </code><code class="o">}</code>
<code class="lineno">14 </code>
<code class="lineno">15 </code><code class="kd">public</code> <code class="kd">static</code> <code class="kt">long</code> <code class="nf">getPoints</code><code class="o">(</code><code class="kd">final</code> <code class="n">String</code> <code class="n">name</code><code class="o">)</code> <code class="o">{</code>
<code class="lineno">16 </code>	<code class="c1">// gets the Points for the Player</code>
<code class="lineno">17 </code><code class="o">}</code>
</pre></div>

</figure>

<p>Finding the highest player could be done very simply in Java 8 as shown in the following code:</p>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno">1 </code><code class="n">PlayerPoints</code> <code class="n">highestPlayer</code> <code class="o">=</code> 
<code class="lineno">2 </code>  <code class="n">names</code><code class="o">.</code><code class="na">stream</code><code class="o">().</code><code class="na">map</code><code class="o">(</code><code class="n">name</code> <code class="o">-&gt;</code> <code class="k">new</code> <code class="n">PlayerPoints</code><code class="o">(</code><code class="n">name</code><code class="o">,</code> <code class="n">getPoints</code><code class="o">(</code><code class="n">name</code><code class="o">)))</code>
<code class="lineno">3 </code>	<code class="o">.</code><code class="na">reduce</code><code class="o">(</code><code class="k">new</code> <code class="n">PlayerPoints</code><code class="o">(</code><code class="s">""</code><code class="o">,</code> <code class="mf">0.0</code><code class="o">),</code> 
<code class="lineno">4 </code>			<code class="o">(</code><code class="n">s1</code><code class="o">,</code> <code class="n">s2</code><code class="o">)</code> <code class="o">-&gt;</code> <code class="o">(</code><code class="n">s1</code><code class="o">.</code><code class="na">points</code> <code class="o">&gt;</code> <code class="n">s2</code><code class="o">.</code><code class="na">points</code><code class="o">)</code> <code class="o">?</code> <code class="n">s1</code> <code class="o">:</code> <code class="n">s2</code><code class="o">);</code>
</pre></div>

</figure>

<p>This could also be done in Java 7 with the <code>dollar</code> library (or similarly with Guava or Functional-Java), but it would be much more verbose as shown in the following:</p>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno"> 1 </code><code class="n">PlayerPoints</code> <code class="n">highestPlayer</code> <code class="o">=</code> 
<code class="lineno"> 2 </code>  <code class="n">$</code><code class="o">(</code><code class="n">names</code><code class="o">).</code><code class="na">map</code><code class="o">(</code><code class="k">new</code> <code class="n">Function</code><code class="o">&lt;</code><code class="n">String</code><code class="o">,</code> <code class="n">PlayerPoints</code><code class="o">&gt;()</code> <code class="o">{</code> 
<code class="lineno"> 3 </code>		<code class="kd">public</code> <code class="n">PlayerPoints</code> <code class="nf">call</code><code class="o">(</code><code class="n">String</code> <code class="n">name</code><code class="o">)</code> <code class="o">{</code> 
<code class="lineno"> 4 </code>			<code class="k">return</code> <code class="k">new</code> <code class="n">PlayerPoints</code><code class="o">(</code><code class="n">name</code><code class="o">,</code> <code class="n">getPoints</code><code class="o">(</code><code class="n">name</code><code class="o">));</code>
<code class="lineno"> 5 </code>		<code class="o">}</code>
<code class="lineno"> 6 </code>	<code class="o">})</code>
<code class="lineno"> 7 </code>	<code class="o">.</code><code class="na">reduce</code><code class="o">(</code><code class="k">new</code> <code class="n">PlayerPoints</code><code class="o">(</code><code class="s">""</code><code class="o">,</code> <code class="mf">0.0</code><code class="o">),</code> 
<code class="lineno"> 8 </code>	<code class="k">new</code> <code class="n">BiFunction</code><code class="o">&lt;</code><code class="n">PlayerPoints</code><code class="o">,</code> <code class="n">PlayerPoints</code><code class="o">,</code> <code class="n">PlayerPoints</code><code class="o">&gt;()</code> <code class="o">{</code>
<code class="lineno"> 9 </code>		<code class="kd">public</code> <code class="n">PlayerPoints</code> <code class="nf">call</code><code class="o">(</code><code class="n">PlayerPoints</code> <code class="n">s1</code><code class="o">,</code> <code class="n">PlayerPoints</code> <code class="n">s2</code><code class="o">)</code> <code class="o">{</code> 
<code class="lineno">10 </code>			<code class="k">return</code> <code class="o">(</code><code class="n">s1</code><code class="o">.</code><code class="na">points</code> <code class="o">&gt;</code> <code class="n">s2</code><code class="o">.</code><code class="na">points</code><code class="o">)</code> <code class="o">?</code> <code class="n">s1</code> <code class="o">:</code> <code class="n">s2</code><code class="o">;</code>
<code class="lineno">11 </code>		<code class="o">}</code>
<code class="lineno">12 </code>	<code class="o">});</code>
</pre></div>

</figure>

<p>The major benefit to coding this way (apart from the reduction in lines of code) is the ability to hide the underlying implementation of map/reduce. For example, it’s possible that map and reduce are implemented concurrently, allowing you to easily take advantage of multiple processors.
We’ll describe one way to do this (ParallelArray) in the following section.</p>

<h3 id="leanpub-auto-parallel-array">
<span class="section-number">4.5 </span>Parallel Array</h3>

<p>The <code>ParallelArray</code> was part of JSR-166, but ended up <a href="http://puredanger.com/tech/2009/11/15/jsr-166-concurrency-updates-hit-jdk-7/">being excluded from the standard Java lib</a>. 
It does exist and was released to the public domain (you can download it from the JSR website).</p>

<p>Although it was already out there, it really wasn’t easy to use until closures were included in the Java language.
In Java 7 using the ParallelArray looks like the following:</p>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno"> 1 </code><code class="c1">// with this class</code>
<code class="lineno"> 2 </code><code class="kd">public</code> <code class="kd">class</code> <code class="nc">Student</code> <code class="o">{</code>
<code class="lineno"> 3 </code>    <code class="n">String</code> <code class="n">name</code><code class="o">;</code>
<code class="lineno"> 4 </code>    <code class="kt">int</code> <code class="n">graduationYear</code><code class="o">;</code>
<code class="lineno"> 5 </code>    <code class="kt">double</code> <code class="n">gpa</code><code class="o">;</code>
<code class="lineno"> 6 </code><code class="o">}</code>
<code class="lineno"> 7 </code><code class="c1">// this predicate</code>
<code class="lineno"> 8 </code><code class="kd">final</code> <code class="n">Ops</code><code class="o">.</code><code class="na">Predicate</code><code class="o">&lt;</code><code class="n">Student</code><code class="o">&gt;</code> <code class="n">isSenior</code> <code class="o">=</code> 
<code class="lineno"> 9 </code>	<code class="k">new</code> <code class="n">Ops</code><code class="o">.</code><code class="na">Predicate</code><code class="o">&lt;&gt;()</code> <code class="o">{</code>
<code class="lineno">10 </code>		<code class="kd">public</code> <code class="kt">boolean</code> <code class="nf">op</code><code class="o">(</code><code class="n">Student</code> <code class="n">s</code><code class="o">)</code> <code class="o">{</code>
<code class="lineno">11 </code>			<code class="k">return</code> <code class="n">s</code><code class="o">.</code><code class="na">graduationYear</code> <code class="o">==</code> <code class="n">Student</code><code class="o">.</code><code class="na">THIS_YEAR</code><code class="o">;</code>
<code class="lineno">12 </code>		<code class="o">}</code>
<code class="lineno">13 </code>	<code class="o">};</code>
<code class="lineno">14 </code><code class="c1">// and this conversion operation</code>
<code class="lineno">15 </code><code class="kd">final</code> <code class="n">Ops</code><code class="o">.</code><code class="na">ObjectToDouble</code><code class="o">&lt;</code><code class="n">Student</code><code class="o">&gt;</code> <code class="n">selectGpa</code> <code class="o">=</code> 
<code class="lineno">16 </code>	<code class="k">new</code> <code class="n">Ops</code><code class="o">.</code><code class="na">ObjectToDouble</code><code class="o">&lt;&gt;()</code> <code class="o">{</code>
<code class="lineno">17 </code>		<code class="kd">public</code> <code class="kt">double</code> <code class="nf">op</code><code class="o">(</code><code class="n">Student</code> <code class="n">student</code><code class="o">)</code> <code class="o">{</code>
<code class="lineno">18 </code>			<code class="k">return</code> <code class="n">student</code><code class="o">.</code><code class="na">gpa</code><code class="o">;</code>
<code class="lineno">19 </code>		<code class="o">}</code>
<code class="lineno">20 </code>	<code class="o">};</code>
<code class="lineno">21 </code><code class="c1">// create a fork-join-pool</code>
<code class="lineno">22 </code><code class="n">ForkJoinPool</code> <code class="n">fjPool</code> <code class="o">=</code> <code class="k">new</code> <code class="n">ForkJoinPool</code><code class="o">();</code>
<code class="lineno">23 </code><code class="n">ParallelArray</code><code class="o">&lt;</code><code class="n">Student</code><code class="o">&gt;</code> <code class="n">students</code> <code class="o">=</code> <code class="k">new</code> <code class="n">ParallelArray</code><code class="o">&lt;&gt;(</code><code class="n">fjPool</code><code class="o">,</code> <code class="n">data</code><code class="o">);</code>
<code class="lineno">24 </code><code class="c1">// find the best GPA:</code>
<code class="lineno">25 </code><code class="kt">double</code> <code class="n">bestGpa</code> <code class="o">=</code> <code class="n">students</code><code class="o">.</code><code class="na">withFilter</code><code class="o">(</code><code class="n">isSenior</code><code class="o">)</code>
<code class="lineno">26 </code>                         <code class="o">.</code><code class="na">withMapping</code><code class="o">(</code><code class="n">selectGpa</code><code class="o">)</code>
<code class="lineno">27 </code>                         <code class="o">.</code><code class="na">max</code><code class="o">();</code>
</pre></div>

</figure>

<p>In Java 8, you can do the following:</p>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno">1 </code><code class="c1">// create a fork-join-pool</code>
<code class="lineno">2 </code><code class="n">ForkJoinPool</code> <code class="n">pool</code> <code class="o">=</code> <code class="k">new</code> <code class="n">ForkJoinPool</code><code class="o">();</code>
<code class="lineno">3 </code><code class="n">ParallelArray</code><code class="o">&lt;</code><code class="n">Student</code><code class="o">&gt;</code> <code class="n">students</code> <code class="o">=</code> <code class="k">new</code> <code class="n">ParallelArray</code><code class="o">&lt;&gt;(</code><code class="n">pool</code><code class="o">,</code><code class="n">data</code><code class="o">);</code>
<code class="lineno">4 </code><code class="c1">// find the best GPA:</code>
<code class="lineno">5 </code><code class="kt">double</code> <code class="n">bestGpa</code> <code class="o">=</code> <code class="n">students</code>
<code class="lineno">6 </code>    <code class="o">.</code><code class="na">withFilter</code><code class="o">((</code><code class="n">Student</code> <code class="n">s</code><code class="o">)</code> <code class="o">-&gt;</code> <code class="o">(</code><code class="n">s</code><code class="o">.</code><code class="na">graduationYear</code> <code class="o">==</code> <code class="n">THIS_YEAR</code><code class="o">))</code>
<code class="lineno">7 </code>    <code class="o">.</code><code class="na">withMapping</code><code class="o">((</code><code class="n">Student</code> <code class="n">s</code><code class="o">)</code> <code class="o">-&gt;</code> <code class="n">s</code><code class="o">.</code><code class="na">gpa</code><code class="o">)</code>
<code class="lineno">8 </code>    <code class="o">.</code><code class="na">max</code><code class="o">();</code>
</pre></div>

</figure>

<p>However, Java 8’s addition of <em>stream()</em> and <em>parallelStream()</em> make this even easier:</p>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno">1 </code><code class="kt">double</code> <code class="n">bestGpa</code> <code class="o">=</code> <code class="n">students</code>
<code class="lineno">2 </code>    <code class="o">.</code><code class="na">parallelStream</code><code class="o">()</code>
<code class="lineno">3 </code>    <code class="o">.</code><code class="na">filter</code><code class="o">(</code><code class="n">s</code> <code class="o">-&gt;</code> <code class="o">(</code><code class="n">s</code><code class="o">.</code><code class="na">graduationYear</code> <code class="o">==</code> <code class="n">THIS_YEAR</code><code class="o">))</code>
<code class="lineno">4 </code>    <code class="o">.</code><code class="na">mapToDouble</code><code class="o">(</code><code class="n">s</code> <code class="o">-&gt;</code> <code class="n">s</code><code class="o">.</code><code class="na">gpa</code><code class="o">)</code>
<code class="lineno">5 </code>    <code class="o">.</code><code class="na">max</code><code class="o">().</code><code class="na">getAsDouble</code><code class="o">();</code>
</pre></div>

</figure>

<p>This makes it extremely simple to switch between a sequential implementation and a concurrent one.</p>

<aside>
  <h3 id="leanpub-auto-groovy-gpars">Groovy GPars</h3>
  <p>You can do something similar to this right now if you use Groovy with the GPars library in the following way:</p>

  <figure class="code">
<div class="highlight"><pre><code></code><code class="lineno">1 </code><code class="n">GParsPool</code><code class="o">.</code><code class="na">withPool</code> <code class="o">{</code>
<code class="lineno">2 </code>   <code class="c1">// a map-reduce functional style (students is a Collection)</code>
<code class="lineno">3 </code>   <code class="kt">def</code> <code class="n">bestGpa</code> <code class="o">=</code> <code class="n">students</code><code class="o">.</code><code class="na">parallel</code>
<code class="lineno">4 </code>       <code class="o">.</code><code class="na">filter</code><code class="o">{</code> <code class="n">s</code> <code class="o">-&gt;</code> <code class="n">s</code><code class="o">.</code><code class="na">graduationYear</code> <code class="o">==</code> <code class="n">Student</code><code class="o">.</code><code class="na">THIS_YEAR</code> <code class="o">}</code>
<code class="lineno">5 </code>       <code class="o">.</code><code class="na">map</code><code class="o">{</code> <code class="n">s</code> <code class="o">-&gt;</code> <code class="n">s</code><code class="o">.</code><code class="na">gpa</code> <code class="o">}</code>
<code class="lineno">6 </code>       <code class="o">.</code><code class="na">max</code><code class="o">()</code>
<code class="lineno">7 </code><code class="o">}</code>
</pre></div>

  </figure>

  <p>The static method <code>GParsPool.withPool</code> takes in a closure and augments any Collection with several methods (using Groovy’s Category mechanism).
The <code>parallel</code> method actually creates a ParallelArray (JSR-166) from the given Collection and uses it with a <a href="http://gpars.org/1.0.0/A%3Eguide/guide/dataParallelism.html#dataParallelism_map-reduce">thin wrapper around it.</a></p>

</aside>


<h3 id="leanpub-auto-peek">
<span class="section-number">4.6 </span>Peek</h3>

<p>You can peek into a stream to do some action without interrupting the stream.</p>

<p>For example you could print out elements to debug code:</p>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno">1 </code><code class="n">Files</code><code class="o">.</code><code class="na">list</code><code class="o">(</code><code class="n">Paths</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code class="s">"."</code><code class="o">))</code>
<code class="lineno">2 </code>    <code class="o">.</code><code class="na">map</code><code class="o">(</code><code class="n">Path</code><code class="o">::</code><code class="n">getFileName</code><code class="o">)</code>
<code class="lineno">3 </code>    <code class="o">.</code><code class="na">peek</code><code class="o">(</code><code class="n">System</code><code class="o">.</code><code class="na">out</code><code class="o">::</code><code class="n">println</code><code class="o">)</code>
<code class="lineno">4 </code>    <code class="o">.</code><code class="na">forEach</code><code class="o">(</code><code class="n">p</code> <code class="o">-&gt;</code> <code class="n">doSomething</code><code class="o">(</code><code class="n">p</code><code class="o">));</code>
</pre></div>

</figure>

<p>You can use any action you want, but you should <em>not</em> try to modify elements; you should use <code>map</code> instead.</p>

<h3 id="leanpub-auto-limit">
<span class="section-number">4.7 </span>Limit</h3>

<p>The <code>limit(int n)</code> method can be used to limit a stream to the given number of elements.
For example:</p>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno">1 </code><code class="n">Random</code> <code class="n">rnd</code> <code class="o">=</code> <code class="k">new</code> <code class="n">Random</code><code class="o">();</code>
<code class="lineno">2 </code><code class="n">rnd</code><code class="o">.</code><code class="na">ints</code><code class="o">().</code><code class="na">limit</code><code class="o">(</code><code class="mi">10</code><code class="o">)</code>
<code class="lineno">3 </code>    <code class="o">.</code><code class="na">forEach</code><code class="o">(</code><code class="n">System</code><code class="o">.</code><code class="na">out</code><code class="o">::</code><code class="n">println</code><code class="o">);</code>
</pre></div>

</figure>

<p>The above would print out ten random integers.</p>

<h3 id="leanpub-auto-sort">
<span class="section-number">4.8 </span>Sort</h3>

<p>Stream also has the <code>sorted()</code> method for sorting a stream.
Like all <em>intermediate methods</em> on Stream (such as <code>map</code>, <code>filter</code>, and <code>peek</code>), the <code>sorted()</code> method executes lazily.
Nothing happens until a terminating operation (such as <code>reduce</code> or <code>forEach</code>) is called.
However, you should call a limiting operation like <code>limit</code> before calling <code>sorted()</code> on an infinite stream.</p>

<p>For example, the following would throw a runtime exception (using build 1.8.0-b132):</p>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno">1 </code><code class="n">rnd</code><code class="o">.</code><code class="na">ints</code><code class="o">().</code><code class="na">sorted</code><code class="o">().</code><code class="na">limit</code><code class="o">(</code><code class="mi">10</code><code class="o">)</code>
<code class="lineno">2 </code>    <code class="o">.</code><code class="na">forEach</code><code class="o">(</code><code class="n">System</code><code class="o">.</code><code class="na">out</code><code class="o">::</code><code class="n">println</code><code class="o">);</code>
</pre></div>

</figure>

<p>However, the following code works just fine:</p>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno">1 </code><code class="n">rnd</code><code class="o">.</code><code class="na">ints</code><code class="o">().</code><code class="na">limit</code><code class="o">(</code><code class="mi">10</code><code class="o">).</code><code class="na">sorted</code><code class="o">()</code>
<code class="lineno">2 </code>    <code class="o">.</code><code class="na">forEach</code><code class="o">(</code><code class="n">System</code><code class="o">.</code><code class="na">out</code><code class="o">::</code><code class="n">println</code><code class="o">);</code>
</pre></div>

</figure>

<p>Also, you should call <code>sorted()</code> after any calls to <code>filter</code>.
For example, this code prints out the first five Java file-names in the current directory:</p>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno">1 </code><code class="n">Files</code><code class="o">.</code><code class="na">list</code><code class="o">(</code><code class="n">Paths</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code class="s">"."</code><code class="o">))</code>
<code class="lineno">2 </code>    <code class="o">.</code><code class="na">map</code><code class="o">(</code><code class="n">Path</code><code class="o">::</code><code class="n">getFileName</code><code class="o">)</code> <code class="c1">// still a path</code>
<code class="lineno">3 </code>    <code class="o">.</code><code class="na">map</code><code class="o">(</code><code class="n">Path</code><code class="o">::</code><code class="n">toString</code><code class="o">)</code> <code class="c1">// convert to Strings</code>
<code class="lineno">4 </code>    <code class="o">.</code><code class="na">filter</code><code class="o">(</code><code class="n">name</code> <code class="o">-&gt;</code> <code class="n">name</code><code class="o">.</code><code class="na">endsWith</code><code class="o">(</code><code class="s">".java"</code><code class="o">))</code>
<code class="lineno">5 </code>    <code class="o">.</code><code class="na">sorted</code><code class="o">()</code> <code class="c1">// sort them alphabetically</code>
<code class="lineno">6 </code>    <code class="o">.</code><code class="na">limit</code><code class="o">(</code><code class="mi">5</code><code class="o">)</code> <code class="c1">// first 5</code>
<code class="lineno">7 </code>    <code class="o">.</code><code class="na">forEach</code><code class="o">(</code><code class="n">System</code><code class="o">.</code><code class="na">out</code><code class="o">::</code><code class="n">println</code><code class="o">);</code>
</pre></div>

</figure>

<p>The code above does the following:</p>

<ul>
  <li>Lists the files in the current directory.</li>
  <li>Maps those files to file names.</li>
  <li>Finds names that end with “.java”.</li>
  <li>Takes only the first five (sorted alphabetically).</li>
  <li>Prints them out.</li>
</ul>

<h3 id="leanpub-auto-collectors-and-statistics">
<span class="section-number">4.9 </span>Collectors and Statistics</h3>

<p>Since Streams are lazily evaluated and support parallel execution, you need a special way to combine results; this is called a <em>Collector</em>.</p>

<p>A <em>Collector</em> represents a way to combine the elements of a Stream into one result.
It consists of three things:</p>

<ul>
  <li>A <em>supplier</em> of an initial value.</li>
  <li>An <em>accumulator</em> which adds to the initial value.</li>
  <li>A <em>combiner</em> which combines two results into one.</li>
</ul>

<p>There are two ways to do this: <code>collect(supplier,accumulator,combiner)</code>, or <code>collect(Collector)</code> (types left off for brevity).</p>

<p>Luckily, Java 8 comes with several Collectors built in. 
Import them the following way:</p>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno">1 </code><code class="kn">import static</code> <code class="nn">java.util.stream.Collectors.*</code><code class="o">;</code>
</pre></div>

</figure>

<h4 id="leanpub-auto-simple-collectors">Simple Collectors</h4>

<p>The simplest collectors are things like toList() and toCollection():</p>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno">1 </code><code class="c1">// Accumulate names into a List</code>
<code class="lineno">2 </code><code class="n">List</code><code class="o">&lt;</code><code class="n">String</code><code class="o">&gt;</code> <code class="n">list</code> <code class="o">=</code> <code class="n">dragons</code><code class="o">.</code><code class="na">stream</code><code class="o">()</code>
<code class="lineno">3 </code>        <code class="o">.</code><code class="na">map</code><code class="o">(</code><code class="n">Dragon</code><code class="o">::</code><code class="n">getName</code><code class="o">)</code>
<code class="lineno">4 </code>        <code class="o">.</code><code class="na">collect</code><code class="o">(</code><code class="n">toList</code><code class="o">());</code>
<code class="lineno">5 </code>
<code class="lineno">6 </code><code class="c1">// Accumulate names into a TreeSet</code>
<code class="lineno">7 </code><code class="n">Set</code><code class="o">&lt;</code><code class="n">String</code><code class="o">&gt;</code> <code class="n">set</code> <code class="o">=</code> <code class="n">dragons</code><code class="o">.</code><code class="na">stream</code><code class="o">()</code>
<code class="lineno">8 </code>        <code class="o">.</code><code class="na">map</code><code class="o">(</code><code class="n">Dragon</code><code class="o">::</code><code class="n">getName</code><code class="o">)</code>
<code class="lineno">9 </code>        <code class="o">.</code><code class="na">collect</code><code class="o">(</code><code class="n">toCollection</code><code class="o">(</code><code class="n">TreeSet</code><code class="o">::</code><code class="k">new</code><code class="o">));</code>
</pre></div>

</figure>

<h4 id="leanpub-auto-joining">Joining</h4>

<p>If you’re familiar with Apache Commons’ <code>StringUtil.join</code>, the <code>joining</code> collector is similar to it.
It combines the stream using a given delimiter.
For example:</p>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno">1 </code><code class="n">String</code> <code class="n">names</code> <code class="o">=</code> <code class="n">dragons</code><code class="o">.</code><code class="na">stream</code><code class="o">()</code>
<code class="lineno">2 </code>        <code class="o">.</code><code class="na">map</code><code class="o">(</code><code class="n">Dragon</code><code class="o">::</code><code class="n">getName</code><code class="o">)</code>
<code class="lineno">3 </code>        <code class="o">.</code><code class="na">collect</code><code class="o">(</code><code class="n">joining</code><code class="o">(</code><code class="s">","</code><code class="o">));</code>
</pre></div>

</figure>

<p>This would combine all of the names into one String separated by commas.</p>

<h4 id="leanpub-auto-statistics">Statistics</h4>

<p>More complex collectors resolve to a single value.
For example, you can use an “averaging” Collector to get the average; for example:</p>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno">1 </code><code class="n">System</code><code class="o">.</code><code class="na">out</code><code class="o">.</code><code class="na">println</code><code class="o">(</code><code class="s">"\n-----&gt;Average line length:"</code><code class="o">);</code>
<code class="lineno">2 </code><code class="n">System</code><code class="o">.</code><code class="na">out</code><code class="o">.</code><code class="na">println</code><code class="o">(</code>
<code class="lineno">3 </code>    <code class="n">Files</code><code class="o">.</code><code class="na">lines</code><code class="o">(</code><code class="n">Paths</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code class="s">"Nio.java"</code><code class="o">))</code>
<code class="lineno">4 </code>        <code class="o">.</code><code class="na">map</code><code class="o">(</code><code class="n">String</code><code class="o">::</code><code class="n">trim</code><code class="o">)</code>
<code class="lineno">5 </code>        <code class="o">.</code><code class="na">filter</code><code class="o">(</code><code class="n">s</code> <code class="o">-&gt;</code> <code class="o">!</code><code class="n">s</code><code class="o">.</code><code class="na">isEmpty</code><code class="o">())</code>
<code class="lineno">6 </code>        <code class="o">.</code><code class="na">collect</code><code class="o">(</code><code class="n">averagingInt</code><code class="o">(</code><code class="n">String</code><code class="o">::</code><code class="n">length</code><code class="o">))</code>
<code class="lineno">7 </code>        <code class="o">);</code>
</pre></div>

</figure>

<p>The above code calculates the average length of non-empty lines in the file “Nio.java”.</p>

<p>Sometimes you want to collect multiple statistics about a collection.
Because Streams are consumed when you call <code>collect</code>, you need to calculate all of your statistics at once.
This is where <em>SummaryStatistics</em> comes in.
First import the one you want to use:</p>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno">1 </code><code class="kn">import</code> <code class="nn">java.util.IntSummaryStatistics</code><code class="o">;</code>    
</pre></div>

</figure>

<p>Then use the <code>summarizingInt</code> collector; for example:</p>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno">1 </code><code class="n">IntSummaryStatistics</code> <code class="n">stats</code> <code class="o">=</code> <code class="n">Files</code><code class="o">.</code><code class="na">lines</code><code class="o">(</code><code class="n">Paths</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code class="s">"Nio.java"</code><code class="o">))</code>
<code class="lineno">2 </code>        <code class="o">.</code><code class="na">map</code><code class="o">(</code><code class="n">String</code><code class="o">::</code><code class="n">trim</code><code class="o">)</code>
<code class="lineno">3 </code>        <code class="o">.</code><code class="na">filter</code><code class="o">(</code><code class="n">s</code> <code class="o">-&gt;</code> <code class="o">!</code><code class="n">s</code><code class="o">.</code><code class="na">isEmpty</code><code class="o">())</code>
<code class="lineno">4 </code>        <code class="o">.</code><code class="na">collect</code><code class="o">(</code><code class="n">summarizingInt</code><code class="o">(</code><code class="n">String</code><code class="o">::</code><code class="n">length</code><code class="o">));</code>
<code class="lineno">5 </code>
<code class="lineno">6 </code><code class="n">System</code><code class="o">.</code><code class="na">out</code><code class="o">.</code><code class="na">println</code><code class="o">(</code><code class="n">stats</code><code class="o">.</code><code class="na">getAverage</code><code class="o">());</code>
<code class="lineno">7 </code><code class="n">System</code><code class="o">.</code><code class="na">out</code><code class="o">.</code><code class="na">println</code><code class="o">(</code><code class="s">"count="</code> <code class="o">+</code> <code class="n">stats</code><code class="o">.</code><code class="na">getCount</code><code class="o">());</code>
<code class="lineno">8 </code><code class="n">System</code><code class="o">.</code><code class="na">out</code><code class="o">.</code><code class="na">println</code><code class="o">(</code><code class="s">"max="</code> <code class="o">+</code> <code class="n">stats</code><code class="o">.</code><code class="na">getMax</code><code class="o">());</code>
<code class="lineno">9 </code><code class="n">System</code><code class="o">.</code><code class="na">out</code><code class="o">.</code><code class="na">println</code><code class="o">(</code><code class="s">"min="</code> <code class="o">+</code> <code class="n">stats</code><code class="o">.</code><code class="na">getMin</code><code class="o">());</code>
</pre></div>

</figure>

<p>The above code performs the same average as before, but also computes the maximum, minimum, and count of the elements.</p>

<aside class="tip blurb">
    <p>There’s also <code>summarizingLong</code> and <code>summarizingDouble</code>.</p>

</aside>

<p>Equivalently, you can map your stream to a primitive type and then call <code>summaryStatistics()</code>.
For example:</p>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno">1 </code><code class="n">IntSummaryStatistics</code> <code class="n">stats</code> <code class="o">=</code> <code class="n">Files</code><code class="o">.</code><code class="na">lines</code><code class="o">(</code><code class="n">Paths</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code class="s">"Nio.java"</code><code class="o">))</code>
<code class="lineno">2 </code>    <code class="o">.</code><code class="na">map</code><code class="o">(</code><code class="n">String</code><code class="o">::</code><code class="n">trim</code><code class="o">)</code>
<code class="lineno">3 </code>    <code class="o">.</code><code class="na">filter</code><code class="o">(</code><code class="n">s</code> <code class="o">-&gt;</code> <code class="o">!</code><code class="n">s</code><code class="o">.</code><code class="na">isEmpty</code><code class="o">())</code>
<code class="lineno">4 </code>    <code class="o">.</code><code class="na">mapToInt</code><code class="o">(</code><code class="n">String</code><code class="o">::</code><code class="n">length</code><code class="o">)</code>
<code class="lineno">5 </code>    <code class="o">.</code><code class="na">summaryStatistics</code><code class="o">();</code>
</pre></div>

</figure>

<h3 id="leanpub-auto-grouping-and-partitioning">
<span class="section-number">4.10 </span>Grouping and Partitioning</h3>

<p>The <code>groupingBy</code> collector groups elements based on a function you provide.
For example: </p>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno">1 </code><code class="c1">// Group by first letter of name</code>
<code class="lineno">2 </code><code class="n">List</code><code class="o">&lt;</code><code class="n">Dragon</code><code class="o">&gt;</code> <code class="n">dragons</code> <code class="o">=</code> <code class="n">getDragons</code><code class="o">();</code>
<code class="lineno">3 </code><code class="n">Map</code><code class="o">&lt;</code><code class="n">Character</code><code class="o">,</code><code class="n">List</code><code class="o">&lt;</code><code class="n">Dragon</code><code class="o">&gt;&gt;</code> <code class="n">map</code> <code class="o">=</code> <code class="n">dragons</code><code class="o">.</code><code class="na">stream</code><code class="o">()</code>
<code class="lineno">4 </code>        <code class="o">.</code><code class="na">collect</code><code class="o">(</code><code class="n">groupingBy</code><code class="o">(</code><code class="n">dragon</code> <code class="o">-&gt;</code> <code class="n">dragon</code><code class="o">.</code><code class="na">getName</code><code class="o">().</code><code class="na">charAt</code><code class="o">(</code><code class="mi">0</code><code class="o">)));</code>
</pre></div>

</figure>

<p>Similarly, the <code>partitioningBy</code> method creates a map with a boolean key.
For example: </p>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno">1 </code><code class="c1">// Group by whether or not the dragon is green</code>
<code class="lineno">2 </code><code class="n">Map</code><code class="o">&lt;</code><code class="n">Boolean</code><code class="o">,</code><code class="n">List</code><code class="o">&lt;</code><code class="n">Dragon</code><code class="o">&gt;&gt;</code> <code class="n">map</code> <code class="o">=</code> <code class="n">dragons</code><code class="o">.</code><code class="na">stream</code><code class="o">()</code>
<code class="lineno">3 </code>        <code class="o">.</code><code class="na">collect</code><code class="o">(</code><code class="n">partitioningBy</code><code class="o">(</code><code class="n">Dragon</code><code class="o">::</code><code class="n">isGreen</code><code class="o">));</code>
</pre></div>

</figure>

<aside class="tip blurb">
    <h4 id="leanpub-auto-parallel-grouping">Parallel Grouping</h4>
  <p>To execute grouping in parallel (if you don’t care about ordering) you should use the <code>groupingByConcurrent</code> method.
The underlying stream should be unordered to allow grouping to occur in parallel; for example:
<code>dragons.parallelStream().unordered().collect(groupingByConcurrent(Dragon::getColor));</code>.</p>

</aside>

<h3 id="leanpub-auto-comparisons-to-java-7-1">
<span class="section-number">4.11 </span>Comparisons to Java 7</h3>

<p>To better illustrate the benefit of Streams in Java 8, here are some examples of code from Java 7 compared to their new versions.</p>

<h4 id="leanpub-auto-finding-a-maximum">Finding a maximum</h4>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno"> 1 </code><code class="c1">// Java 7</code>
<code class="lineno"> 2 </code><code class="kt">double</code> <code class="n">max</code> <code class="o">=</code> <code class="mi">0</code><code class="o">;</code>
<code class="lineno"> 3 </code>
<code class="lineno"> 4 </code><code class="k">for</code> <code class="o">(</code><code class="n">Double</code> <code class="n">d</code> <code class="o">:</code> <code class="n">list</code><code class="o">)</code> <code class="o">{</code>
<code class="lineno"> 5 </code>    <code class="k">if</code> <code class="o">(</code><code class="n">d</code> <code class="o">&gt;</code> <code class="n">max</code><code class="o">)</code> <code class="o">{</code>
<code class="lineno"> 6 </code>        <code class="n">max</code> <code class="o">=</code> <code class="n">d</code><code class="o">;</code>
<code class="lineno"> 7 </code>    <code class="o">}</code>
<code class="lineno"> 8 </code><code class="o">}</code>
<code class="lineno"> 9 </code><code class="c1">//Java 8</code>
<code class="lineno">10 </code><code class="n">max</code> <code class="o">=</code> <code class="n">list</code><code class="o">.</code><code class="na">stream</code><code class="o">().</code><code class="na">reduce</code><code class="o">(</code><code class="mf">0.0</code><code class="o">,</code> <code class="n">Math</code><code class="o">::</code><code class="n">max</code><code class="o">);</code>
<code class="lineno">11 </code><code class="c1">// or</code>
<code class="lineno">12 </code><code class="n">max</code> <code class="o">=</code> <code class="n">list</code><code class="o">.</code><code class="na">stream</code><code class="o">().</code><code class="na">mapToDouble</code><code class="o">(</code><code class="n">Number</code><code class="o">::</code><code class="n">doubleValue</code><code class="o">).</code><code class="na">max</code><code class="o">().</code><code class="na">getAsDouble</code><code class="o">();</code>
</pre></div>

</figure>

<h4 id="leanpub-auto-calculating-an-average">Calculating an average</h4>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno">1 </code><code class="kt">double</code> <code class="n">total</code> <code class="o">=</code> <code class="mi">0</code><code class="o">;</code>
<code class="lineno">2 </code><code class="kt">double</code> <code class="n">ave</code> <code class="o">=</code> <code class="mi">0</code><code class="o">;</code>
<code class="lineno">3 </code><code class="c1">// Java 7</code>
<code class="lineno">4 </code><code class="k">for</code> <code class="o">(</code><code class="n">Double</code> <code class="n">d</code> <code class="o">:</code> <code class="n">list</code><code class="o">)</code> <code class="o">{</code>
<code class="lineno">5 </code>    <code class="n">total</code> <code class="o">+=</code> <code class="n">d</code><code class="o">;</code>
<code class="lineno">6 </code><code class="o">}</code>
<code class="lineno">7 </code><code class="n">ave</code> <code class="o">=</code> <code class="n">total</code> <code class="o">/</code> <code class="o">((</code><code class="kt">double</code><code class="o">)</code> <code class="n">list</code><code class="o">.</code><code class="na">size</code><code class="o">());</code>
<code class="lineno">8 </code><code class="c1">//Java 8</code>
<code class="lineno">9 </code><code class="n">ave</code> <code class="o">=</code> <code class="n">list</code><code class="o">.</code><code class="na">stream</code><code class="o">().</code><code class="na">mapToDouble</code><code class="o">(</code><code class="n">Number</code><code class="o">::</code><code class="n">doubleValue</code><code class="o">).</code><code class="na">average</code><code class="o">().</code><code class="na">getAsDouble</code><code class="o">();</code>
</pre></div>

</figure>

<h4 id="leanpub-auto-printing-the-numbers-one-through-ten">Printing the numbers one through ten</h4>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno"> 1 </code><code class="c1">// Java 7</code>
<code class="lineno"> 2 </code><code class="k">for</code> <code class="o">(</code><code class="kt">int</code> <code class="n">i</code> <code class="o">=</code> <code class="mi">1</code><code class="o">;</code> <code class="n">i</code> <code class="o">&lt;</code> <code class="mi">11</code><code class="o">;</code> <code class="n">i</code><code class="o">++)</code> <code class="o">{</code>
<code class="lineno"> 3 </code>    <code class="n">System</code><code class="o">.</code><code class="na">out</code><code class="o">.</code><code class="na">println</code><code class="o">(</code><code class="n">i</code><code class="o">);</code>
<code class="lineno"> 4 </code><code class="o">}</code>
<code class="lineno"> 5 </code><code class="c1">// Java 8</code>
<code class="lineno"> 6 </code><code class="n">IntStream</code><code class="o">.</code><code class="na">range</code><code class="o">(</code><code class="mi">1</code><code class="o">,</code> <code class="mi">11</code><code class="o">)</code>
<code class="lineno"> 7 </code>    <code class="o">.</code><code class="na">forEach</code><code class="o">(</code><code class="n">System</code><code class="o">.</code><code class="na">out</code><code class="o">::</code><code class="n">println</code><code class="o">);</code>
<code class="lineno"> 8 </code><code class="c1">//or</code>
<code class="lineno"> 9 </code><code class="n">Stream</code><code class="o">.</code><code class="na">iterate</code><code class="o">(</code><code class="mi">1</code><code class="o">,</code> <code class="n">i</code> <code class="o">-&gt;</code> <code class="n">i</code><code class="o">+</code><code class="mi">1</code><code class="o">).</code><code class="na">limit</code><code class="o">(</code><code class="mi">10</code><code class="o">)</code>
<code class="lineno">10 </code>    <code class="o">.</code><code class="na">forEach</code><code class="o">(</code><code class="n">System</code><code class="o">.</code><code class="na">out</code><code class="o">::</code><code class="n">println</code><code class="o">);</code>
</pre></div>

</figure>

<h4 id="leanpub-auto-joining-strings">Joining Strings</h4>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno">1 </code><code class="c1">// Java 7 using commons-util</code>
<code class="lineno">2 </code><code class="n">List</code><code class="o">&lt;</code><code class="n">String</code><code class="o">&gt;</code> <code class="n">names</code> <code class="o">=</code> <code class="k">new</code> <code class="n">LinkedList</code><code class="o">&lt;&gt;();</code>
<code class="lineno">3 </code><code class="k">for</code> <code class="o">(</code><code class="n">Dragon</code> <code class="n">dragon</code> <code class="o">:</code> <code class="n">dragons</code><code class="o">)</code> 
<code class="lineno">4 </code>    <code class="n">names</code><code class="o">.</code><code class="na">add</code><code class="o">(</code><code class="n">dragon</code><code class="o">.</code><code class="na">getName</code><code class="o">());</code>
<code class="lineno">5 </code><code class="n">String</code> <code class="n">names</code> <code class="o">=</code> <code class="n">StringUtils</code><code class="o">.</code><code class="na">join</code><code class="o">(</code><code class="n">names</code><code class="o">,</code> <code class="s">","</code><code class="o">);</code>
<code class="lineno">6 </code><code class="c1">// Java 8</code>
<code class="lineno">7 </code><code class="n">String</code> <code class="n">names</code> <code class="o">=</code> <code class="n">dragons</code><code class="o">.</code><code class="na">stream</code><code class="o">()</code>
<code class="lineno">8 </code>    <code class="o">.</code><code class="na">map</code><code class="o">(</code><code class="n">Dragon</code><code class="o">::</code><code class="n">getName</code><code class="o">)</code>
<code class="lineno">9 </code>    <code class="o">.</code><code class="na">collect</code><code class="o">(</code><code class="n">Collectors</code><code class="o">.</code><code class="na">joining</code><code class="o">(</code><code class="s">","</code><code class="o">));</code>
</pre></div>

</figure>


<h2 id="leanpub-auto-optional">
<span class="section-number">5. </span>Optional</h2>

<p>Java 8 comes with the <code>Optional</code> class in the <code>java.util</code> package for avoiding null return values (and thus <code>NullPointerException</code>).
It is very similar to Google Guava’s <a href="http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Optional.html">Optional</a>,
which is similar to Nat Pryce’s <a href="http://www.natpryce.com/articles/000776.html">Maybe</a> class 
and Scala’s <code>Option</code> class.</p>

<aside>
  <h3 id="leanpub-auto-the-billion-dollar-mistake">The Billion Dollar Mistake</h3>
  <p>Tony Hoare, the inventor of null, has gone on record calling it his <a href="http://qconlondon.com/london-2009/presentation/Null+References:+The+Billion+Dollar+Mistake">“billion-dollar mistake”</a>. 
Despite your opinion of null, many efforts have been made to make null-checks part of the compilation or automated-code-check process; 
for example, the @Nonnull annotation of JSR-305.
<code>Optional</code> makes it very simple for API designers to avoid null.</p>

</aside>

<p>You can use <code>Optional.of(x)</code> to wrap a non-null value, <code>Optional.empty()</code> to represent a missing value,
 or <code>Optional.ofNullable(x)</code> to create an Optional from a reference that may or may not be null.</p>

<p>After creating an instance of Optional, you then use <code>isPresent()</code> to determine if the there is a value and <code>get()</code> to get the value.
Optional provides a few other helpful methods for dealing with missing values:</p>

<ul>
  <li>
<code>orElse(T)</code> – Returns the given default value if the Optional is empty.</li>
  <li>
<code>orElseGet(Supplier&lt;T&gt;)</code> – Calls on the given Supplier to provide a value if the Optional is empty.</li>
  <li>
<code>orElseThrow(Supplier&lt;X extends Throwable&gt;)</code> – Calls on the given Supplier for an exception to throw if the Optional is empty.</li>
</ul>

<p>It also includes functional style (lambda friendly) methods, like the following:</p>

<ul>
  <li>
<code>filter(Predicate&lt;? super T&gt; predicate)</code> – Filters the value and returns a new Optional.</li>
  <li>
<code>flatMap(Function&lt;? super T,Optional&lt;U&gt;&gt; mapper)</code> – Performs a mapping operation which returns an Optional.</li>
  <li>
<code>ifPresent(Consumer&lt;? super T&gt; consumer)</code> – Executes the given Consumer only if there is a value present (no return value).</li>
  <li>
<code>map(Function&lt;? super T,? extends U&gt; mapper)</code> – Uses the given mapping Function and returns a new Optional.</li>
</ul>

<aside>
  <h3 id="leanpub-auto-stream-optional">Stream Optional</h3>
  <p>The new <code>Stream</code> interface has multiple methods which return Optional (in case there are no values in the Stream):</p>

  <ul>
    <li>
<code>reduce(BinaryOperator&lt;T&gt; accumulator)</code> – Reduces the stream to a single value.</li>
    <li>
<code>max(Comparator&lt;? super T&gt; comparator)</code> – Finds the maximum value.</li>
    <li>
<code>min(Comparator&lt;? super T&gt; comparator)</code> – Finds the minimum value.</li>
  </ul>

</aside>


<h2 id="leanpub-auto-nashorn">
<span class="section-number">6. </span>Nashorn</h2>

<p><em>Nashorn</em> replaces Rhino as the default JavaScript engine for the Oracle JVM.
Nashorn is much faster since it uses the <code>invokedynamic</code> feature of the JVM.
It also includes a command line tool (<code>jjs</code>).</p>

<h3 id="leanpub-auto-jjs">
<span class="section-number">6.1 </span>jjs</h3>

<p>JDK 8 includes the command line tool <code>jjs</code> for running JavaScript.</p>

<p>You can run JavaScript files from the command line (assuming you have Java 8’s bin in your <code>PATH</code>):</p>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno">1 </code><code class="n">$</code> <code class="n">jjs</code> <code class="n">script</code><code class="o">.</code><code class="na">js</code>
</pre></div>

</figure>

<p>This can be useful for running scripts; for example, let’s say you wanted to quickly find the sum of some numbers:</p>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno">1 </code><code class="kd">var</code> <code class="nx">data</code> <code class="o">=</code> <code class="p">[</code><code class="mi">1</code><code class="p">,</code> <code class="mi">3</code><code class="p">,</code> <code class="mi">5</code><code class="p">,</code> <code class="mi">7</code><code class="p">,</code> <code class="mi">11</code><code class="p">]</code>
<code class="lineno">2 </code><code class="kd">var</code> <code class="nx">sum</code> <code class="o">=</code> <code class="nx">data</code><code class="p">.</code><code class="nx">reduce</code><code class="p">(</code><code class="kd">function</code><code class="p">(</code><code class="nx">x</code><code class="p">,</code> <code class="nx">y</code><code class="p">)</code> <code class="p">{</code><code class="k">return</code> <code class="nx">x</code> <code class="o">+</code> <code class="nx">y</code><code class="p">},</code> <code class="mi">0</code><code class="p">)</code>
<code class="lineno">3 </code><code class="nx">print</code><code class="p">(</code><code class="nx">sum</code><code class="p">)</code>
</pre></div>

</figure>

<p>Running the above code should print out <code>27</code>.</p>

<h3 id="leanpub-auto-scripting">
<span class="section-number">6.2 </span>Scripting</h3>

<p>Running jjs with the <code>-scripting</code> option starts up an interactive shell where you can type and evaluate JavaScript.</p>

<p>You can also embed variables into strings and have them evaluate; for example:</p>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno">1 </code><code class="n">jjs</code><code class="o">&gt;</code> <code class="n">var</code> <code class="n">date</code> <code class="o">=</code> <code class="k">new</code> <code class="n">Date</code><code class="o">()</code>
<code class="lineno">2 </code><code class="n">jjs</code><code class="o">&gt;</code> <code class="nf">print</code><code class="o">(</code><code class="s">"${date}"</code><code class="o">)</code>
</pre></div>

</figure>

<p>This would print out the current date and time.</p>

<h3 id="leanpub-auto-scriptengine">
<span class="section-number">6.3 </span>ScriptEngine</h3>

<p>You can also run JavaScript dynamically from Java.</p>

<p>First, you need to import the ScriptEngine:</p>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno">1 </code><code class="kn">import</code> <code class="nn">javax.script.ScriptEngine</code><code class="o">;</code>
<code class="lineno">2 </code><code class="kn">import</code> <code class="nn">javax.script.ScriptEngineManager</code><code class="o">;</code>
</pre></div>

</figure>

<p>Second, you use the <code>ScriptEngineManager</code> to get the Nashorn engine:</p>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno">1 </code><code class="n">ScriptEngineManager</code> <code class="n">engineManager</code> <code class="o">=</code> <code class="k">new</code> <code class="n">ScriptEngineManager</code><code class="o">();</code>
<code class="lineno">2 </code><code class="n">ScriptEngine</code> <code class="n">engine</code> <code class="o">=</code> <code class="n">engineManager</code><code class="o">.</code><code class="na">getEngineByName</code><code class="o">(</code><code class="s">"nashorn"</code><code class="o">);</code>
</pre></div>

</figure>

<p>Now you can evaluate javascript at any point:</p>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno">1 </code><code class="n">engine</code><code class="o">.</code><code class="na">eval</code><code class="o">(</code><code class="s">"function p(s) { print(s) }"</code><code class="o">);</code>
<code class="lineno">2 </code><code class="n">engine</code><code class="o">.</code><code class="na">eval</code><code class="o">(</code><code class="s">"p('Hello Nashorn');"</code><code class="o">);</code>
</pre></div>

</figure>

<p>The <code>eval</code> method can also take a <code>FileReader</code> as input:</p>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno">1 </code><code class="n">engine</code><code class="o">.</code><code class="na">eval</code><code class="o">(</code><code class="k">new</code> <code class="n">FileReader</code><code class="o">(</code><code class="err">'</code><code class="n">library</code><code class="o">.</code><code class="na">js</code><code class="err">'</code><code class="o">));</code>
</pre></div>

</figure>

<p>This way you can include and run any JavaScript. However, keep in mind that the typical variables available to you in the browser (window, document, etc.) are not available.</p>

<h3 id="leanpub-auto-importing">
<span class="section-number">6.4 </span>Importing</h3>

<p>You can import and use Java classes and packages using the <em>JavaImporter</em>.</p>

<p>For example, import <code>java.util</code>, the IO, and NIO file packages:</p>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno">1 </code><code class="kd">var</code> <code class="nx">imports</code> <code class="o">=</code> <code class="k">new</code> <code class="nx">JavaImporter</code><code class="p">(</code><code class="nx">java</code><code class="p">.</code><code class="nx">util</code><code class="p">,</code> <code class="nx">java</code><code class="p">.</code><code class="nx">io</code><code class="p">,</code> <code class="nx">java</code><code class="p">.</code><code class="nx">nio</code><code class="p">.</code><code class="nx">file</code><code class="p">);</code>
<code class="lineno">2 </code><code class="kd">with</code> <code class="p">(</code><code class="nx">imports</code><code class="p">)</code> <code class="p">{</code>
<code class="lineno">3 </code>        <code class="kd">var</code> <code class="nx">paths</code> <code class="o">=</code> <code class="k">new</code> <code class="nx">LinkedList</code><code class="p">();</code>
<code class="lineno">4 </code>        <code class="nx">print</code><code class="p">(</code><code class="nx">paths</code> <code class="k">instanceof</code> <code class="nx">LinkedList</code><code class="p">);</code> <code class="c1">//true</code>
<code class="lineno">5 </code>        <code class="nx">paths</code><code class="p">.</code><code class="nx">add</code><code class="p">(</code><code class="nx">Paths</code><code class="p">.</code><code class="nx">get</code><code class="p">(</code><code class="s2">"file1"</code><code class="p">));</code>
<code class="lineno">6 </code>        <code class="nx">paths</code><code class="p">.</code><code class="nx">add</code><code class="p">(</code><code class="nx">Paths</code><code class="p">.</code><code class="nx">get</code><code class="p">(</code><code class="s2">"file2"</code><code class="p">));</code>
<code class="lineno">7 </code>        <code class="nx">paths</code><code class="p">.</code><code class="nx">add</code><code class="p">(</code><code class="nx">Paths</code><code class="p">.</code><code class="nx">get</code><code class="p">(</code><code class="s2">"file3"</code><code class="p">));</code>
<code class="lineno">8 </code>        <code class="nx">print</code><code class="p">(</code><code class="nx">paths</code><code class="p">)</code> <code class="c1">// [file1, file2, file3]</code>
<code class="lineno">9 </code><code class="p">}</code>
</pre></div>

</figure>

<p>The above demonstrates that <code>paths</code> is an instance of <code>LinkedList</code> and prints out the list.</p>

<p>Later on you could add the following code to write text into the files:</p>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno">1 </code><code class="k">for</code> <code class="p">(</code><code class="kd">var</code> <code class="nx">i</code><code class="o">=</code><code class="mi">0</code><code class="p">;</code> <code class="nx">i</code> <code class="o">&lt;</code> <code class="nx">paths</code><code class="p">.</code><code class="nx">size</code><code class="p">();</code> <code class="nx">i</code><code class="o">++</code><code class="p">)</code>
<code class="lineno">2 </code>	<code class="nx">Files</code><code class="p">.</code><code class="nx">newOutputStream</code><code class="p">(</code><code class="nx">paths</code><code class="p">.</code><code class="nx">get</code><code class="p">(</code><code class="nx">i</code><code class="p">))</code>
<code class="lineno">3 </code>		<code class="p">.</code><code class="nx">write</code><code class="p">(</code><code class="s2">"test\n"</code><code class="p">.</code><code class="nx">getBytes</code><code class="p">());</code>
</pre></div>

</figure>

<p>We can use existing Java classes, but we can also create new ones.</p>

<h3 id="leanpub-auto-extending">
<span class="section-number">6.5 </span>Extending</h3>

<p>You can extend Java classes and interfaces using 
the <code>Java.type</code> and <code>Java.extend</code> functions.
For example, you can extend the Callable interface and implement the <code>call</code> method:</p>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno"> 1 </code><code class="kd">var</code> <code class="nx">concurrent</code> <code class="o">=</code> <code class="k">new</code> <code class="nx">JavaImporter</code><code class="p">(</code><code class="nx">java</code><code class="p">.</code><code class="nx">util</code><code class="p">,</code> <code class="nx">java</code><code class="p">.</code><code class="nx">util</code><code class="p">.</code><code class="nx">concurrent</code><code class="p">);</code>
<code class="lineno"> 2 </code><code class="kd">var</code> <code class="nx">Callable</code> <code class="o">=</code> <code class="nx">Java</code><code class="p">.</code><code class="nx">type</code><code class="p">(</code><code class="s2">"java.util.concurrent.Callable"</code><code class="p">);</code>
<code class="lineno"> 3 </code><code class="kd">with</code> <code class="p">(</code><code class="nx">concurrent</code><code class="p">)</code> <code class="p">{</code>
<code class="lineno"> 4 </code>  <code class="kd">var</code> <code class="nx">executor</code> <code class="o">=</code> <code class="nx">Executors</code><code class="p">.</code><code class="nx">newCachedThreadPool</code><code class="p">();</code>
<code class="lineno"> 5 </code>  <code class="kd">var</code> <code class="nx">tasks</code> <code class="o">=</code> <code class="k">new</code> <code class="nx">LinkedHashSet</code><code class="p">();</code>
<code class="lineno"> 6 </code>  <code class="k">for</code> <code class="p">(</code><code class="kd">var</code> <code class="nx">i</code><code class="o">=</code><code class="mi">0</code><code class="p">;</code> <code class="nx">i</code> <code class="o">&lt;</code> <code class="mi">200</code><code class="p">;</code> <code class="nx">i</code><code class="o">++</code><code class="p">)</code> <code class="p">{</code>
<code class="lineno"> 7 </code>    <code class="kd">var</code> <code class="nx">MyTask</code> <code class="o">=</code> <code class="nx">Java</code><code class="p">.</code><code class="nx">extend</code><code class="p">(</code><code class="nx">Callable</code><code class="p">,</code> <code class="p">{</code><code class="nx">call</code><code class="o">:</code> <code class="kd">function</code><code class="p">()</code> <code class="p">{</code><code class="nx">print</code><code class="p">(</code><code class="s2">"task "</code> <code class="o">+</code> <code class="nx">i</code><code class="p">)}})</code>
<code class="lineno"> 8 </code>    <code class="kd">var</code> <code class="nx">task</code> <code class="o">=</code> <code class="k">new</code> <code class="nx">MyTask</code><code class="p">();</code>
<code class="lineno"> 9 </code>    <code class="nx">tasks</code><code class="p">.</code><code class="nx">add</code><code class="p">(</code><code class="nx">task</code><code class="p">);</code>
<code class="lineno">10 </code>    <code class="nx">executor</code><code class="p">.</code><code class="nx">submit</code><code class="p">(</code><code class="nx">task</code><code class="p">);</code>
<code class="lineno">11 </code>  <code class="p">}</code>
<code class="lineno">12 </code><code class="p">}</code>
</pre></div>

</figure>

<h3 id="leanpub-auto-invocable">
<span class="section-number">6.6 </span>Invocable</h3>

<p>You can also invoke JavaScript functions directly from Java.</p>

<p>Firstly, you need to cast the engine to the Invocable interface:</p>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno">1 </code><code class="n">Invocable</code> <code class="n">inv</code> <code class="o">=</code> <code class="o">(</code><code class="n">Invocable</code><code class="o">)</code> <code class="n">engine</code><code class="o">;</code>
</pre></div>

</figure>

<p>Then, to invoke any function, simple use the <code>invokeFunction</code> method, for example:</p>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno">1 </code><code class="n">engine</code><code class="o">.</code><code class="na">eval</code><code class="o">(</code><code class="s">"function p(s) { print(s) }"</code><code class="o">);</code>
<code class="lineno">2 </code><code class="n">inv</code><code class="o">.</code><code class="na">invokeFunction</code><code class="o">(</code><code class="s">"p"</code><code class="o">,</code> <code class="s">"hello"</code><code class="o">);</code>
</pre></div>

</figure>

<p>Lastly, you can use the <code>getInterface</code> method to implement any interface in JavaScript. </p>

<p>For example, if you have the following <code>JPrinter</code> interface, you can use it like so:</p>

<figure class="code">
<div class="highlight"><pre><code></code><code class="lineno">1 </code><code class="kd">public</code> <code class="kd">static</code> <code class="kd">interface</code> <code class="nc">JPrinter</code> <code class="o">{</code>
<code class="lineno">2 </code>    <code class="kt">void</code> <code class="nf">p</code><code class="o">(</code><code class="n">String</code> <code class="n">s</code><code class="o">);</code>
<code class="lineno">3 </code><code class="o">}</code>
<code class="lineno">4 </code><code class="c1">// later on...</code>
<code class="lineno">5 </code><code class="n">JPrinter</code> <code class="n">printer</code> <code class="o">=</code> <code class="n">inv</code><code class="o">.</code><code class="na">getInterface</code><code class="o">(</code><code class="n">JPrinter</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
<code class="lineno">6 </code><code class="n">printer</code><code class="o">.</code><code class="na">p</code><code class="o">(</code><code class="s">"Hello again!"</code><code class="o">);</code>
</pre></div>

</figure>
<h2 id="leanpub-endnotes">Notes</h2>
<div class="footnotes">
        <h2></h2>  <p id="fn-not">    </p>
<p><span class="endnote-number">1</span>A lambda expression is <em>not</em> an anonymous class; it actually uses <code>invokedynamic</code> in the byte-code.<a href="https://leanpub.com/whatsnewinjava8/read#fnref-not" rel="rev-footnote">↩</a></p>

  <p id="fn-fi">    </p>
<p><span class="endnote-number">2</span>We will explain what “functional interface” means in a later section.<a href="https://leanpub.com/whatsnewinjava8/read#fnref-fi" rel="rev-footnote">↩</a></p>

  <p id="fn-catch">    </p>
<p><span class="endnote-number">3</span>Of course you should add a catch statement to this for error handling.<a href="https://leanpub.com/whatsnewinjava8/read#fnref-catch" rel="rev-footnote">↩</a></p>

  <p id="fn-walk">    </p>
<p><span class="endnote-number">4</span>The actual method signature is <code>walk(Path start, FileVisitOption... options)</code> but you will probably just use <code>walk(Path)</code>.<a href="https://leanpub.com/whatsnewinjava8/read#fnref-walk" rel="rev-footnote">↩</a></p>


</div>

</div>


</section>
</div>

</div>
<footer class="footer">
<div class="container--small">
<h1 class="footer-logo">
<a href="https://leanpub.com/"><img src="./Read What&#39;s New in Java 8 _ Leanpub_files/logo-white-96-67-2x-9bfee74570449b60febfe179fb06c1eb.png" alt="Logo white 96 67 2x">
</a></h1>
<h3 class="footer-slogan">Publish Early, Publish Often</h3>
<ul class="footer-list-break">
<li>
<h5 class="footer-headings">Path</h5>
</li>
<li class="footer-descriptions-top">There are many paths, but the one you're on right now on Leanpub is:</li>
<li class="path">
Whatsnewinjava8 › Read
</li>
</ul>
<div class="footer-links">
<ul class="footer-list">
<ul class="footer-columns">
<li>
<h5 class="footer-headings">READERS</h5>
</li>
</ul>
<ul class="footer-list-break">
<li>
<h5 class="footer-list-title">Newsletters</h5>
</li>
<li><a href="https://leanpub.com/newsletters">Weekly Sale</a></li>
<li><a href="https://leanpub.com/newsletters">Monthly Sale</a></li>
</ul>
<ul class="footer-list-break">
<li>
<h5 class="footer-list-title">Store</h5>
</li>
<li><a href="https://leanpub.com/">Home</a></li>
<li><a href="https://leanpub.com/redeem">Redeem a Token</a></li>
<li><a href="https://leanpub.com/bookstore/book?search">Search</a></li>
</ul>
<ul class="footer-list-break">
<li>
<h5 class="footer-list-title">Support</h5>
</li>
<li><a href="http://help.leanpub.com/en/articles/3788293-the-leanpub-faq">Leanpub FAQ</a></li>
<li><a href="http://help.leanpub.com/en/articles/4405350-leanpub-author-faq">Leanpub Author FAQ</a></li>
<li><a href="http://help.leanpub.com/en/">Search our Help Center</a></li>
<li><a href="http://help.leanpub.com/en/articles/110768-if-i-can-t-find-an-answer-to-my-question-in-this-help-center-what-should-i-do">How to Contact Us</a></li>
</ul>
<ul class="footer-list-break">
<li>
<h5 class="footer-headings">FRONTMATTER PODCAST</h5>
</li>
<li><a href="https://leanpub.com/podcasts/featured">Featured Episode</a></li>
<li><a href="https://leanpub.com/podcasts/frontmatter">Episode List</a></li>
</ul>
<ul class="footer-list-break">
<li>
<h5 class="footer-headings">COMPANY</h5>
</li>
<li>
<h5 class="footer-list-title">About</h5>
</li>
<li><a href="https://leanpub.com/about">About Leanpub</a></li>
<li><a href="https://medium.com/@leanpub">Blog</a></li>
<li><a href="https://leanpub.com/contact">Contact</a></li>
<li><a href="https://leanpub.com/press">Press</a></li>
</ul>
<ul class="footer-list-break">
<li>
<h5 class="footer-list-title">Essays</h5>
</li>
<li><a href="https://leanpub.com/climatechange">Climate Change</a></li>
<li><a href="https://leanpub.com/manifesto">Manifesto</a></li>
<li><a href="https://leanpub.com/covid19">COVID-19</a></li>
</ul>
<ul class="footer-list-break">
<li>
<h5 class="footer-list-title">More</h5>
</li>
<li><a href="https://leanpub.com/causes">Causes</a></li>
<li><a href="https://leanpub.com/accessibility">Accessibility</a></li>
</ul>
</ul>
<ul class="footer-list">
<ul class="footer-columns">
<li>
<h5 class="footer-headings">AUTHORS</h5>
</li>
</ul>
<ul class="footer-list-break">
<li>
<h5 class="footer-list-title">Write and Publish on Leanpub</h5>
</li>
<li><a href="https://leanpub.com/create/book">Create a Book</a></li>
<li><a href="https://leanpub.com/create/course">Create a Course</a></li>
<li><a href="https://leanpub.com/testimonials">Testimonials</a></li>
<li><a href="https://leanpub.com/authors">Why Leanpub</a></li>
</ul>
<ul class="footer-list-break">
<li>
<h5 class="footer-list-title">Author Newsletter</h5>
</li>
<li><a href="https://leanpub.com/newsletters">The Leanpub Author Update</a></li>
</ul>
<ul class="footer-list-break">
<li>
<h5 class="footer-list-title">Author Support</h5>
</li>
<li><a href="http://help.leanpub.com/author-help">Author Help Center</a></li>
<li><a href="https://community.leanpub.com/c/authors">Leanpub Authors Forum</a></li>
<li><a href="https://leanpub.com/manual/read">The Leanpub Manual</a></li>
<li><a href="https://leanpub.com/help/supported_languages">Supported Languages</a></li>
<li><a href="https://leanpub.com/lfm/read">The LFM Manual</a></li>
<li><a href="https://leanpub.com/markua/read">Markua Manual</a></li>
</ul>
<ul class="footer-list-break">
<li>
<h5 class="footer-list-title">Developer Support</h5>
</li>
<li><a href="https://leanpub.com/help/api">API Docs</a></li>
</ul>
<ul class="footer-list-break">
<li>
<h5 class="footer-list-title">Companies</h5>
</li>
<li><a href="https://leanpub.com/companies">Company Program</a></li>
<li><a href="https://leanpub.com/p/register">Create a Company</a></li>
</ul>
<ul class="footer-list-break">
<li>
<h5 class="footer-list-title">Universities</h5>
</li>
<li><a href="https://leanpub.com/universities">Universities Program</a></li>
</ul>
<ul class="footer-list-break">
<li>
<h5 class="footer-headings">LEGAL</h5>
</li>
<li><a href="https://leanpub.com/terms">Terms of Service</a></li>
<li><a href="https://leanpub.com/takedown">Copyright Policy</a></li>
<li><a href="https://leanpub.com/privacy">Privacy Policy</a></li>
</ul>
</ul>
</div>
<p class="footer-copyright">
*&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;&nbsp;*
</p>
<p class="footer-copyright">
Leanpub is copyright © 2010-2021 <a href="http://ruboss.com/">Ruboss Technology Corp.</a><br>
All rights reserved.
</p>
<p class="footer-copyright">
This site is protected by reCAPTCHA<br>
and the Google&nbsp;
<a rel="noopener noreferrer" target="_blank" href="https://policies.google.com/privacy">Privacy Policy</a> and&nbsp;
<a rel="noopener noreferrer" target="_blank" href="https://policies.google.com/terms">Terms of Service</a> apply.
</p>
</div>
</footer>

<div id="react-modal"></div>

</div>
<div class="cookies-banner alert alert--info" style="display: none">
  Leanpub requires cookies in order to provide you the best experience.
  <a class="dismiss link">Dismiss</a>
</div>

<script type="text/javascript">
  window.addEventListener('load', function() {
    var shouldShowCookies = document.cookie.indexOf('should_show_cookies') !== -1

    if (shouldShowCookies) {
      var banner = document.querySelector('.cookies-banner')
      // IE < 9 check
      if (banner.style.removeProperty) {
        banner.style.removeProperty('display');
      } else {
        banner.style.removeAttribute('display');
      }
      document.querySelector('.cookies-banner').classList.add('shown')
      // Note that we have to use vanilla JS here because ujs (remote links) code doesn't live in the react app, and i don't
      // want to have to write this shit twice.
      document.querySelector('.cookies-banner .dismiss').addEventListener('click', function() {
        document.querySelector('.cookies-banner').remove()
        var xhr = new XMLHttpRequest()
        xhr.open("POST", "/api/v1/accepted_terms/dismiss_cookies", true);
        xhr.send()
      })
    }
  })
</script>


<script src="./Read What&#39;s New in Java 8 _ Leanpub_files/application-28e671009ed2f4d7fb89c2270abb6265.js.download"></script>
<!-- Twitter universal website tag code -->
<script>
!function(e,t,n,s,u,a){e.twq||(s=e.twq=function(){s.exe?s.exe.apply(s,arguments):s.queue.push(arguments);
},s.version='1.1',s.queue=[],u=t.createElement(n),u.async=!0,u.src='//static.ads-twitter.com/uwt.js',
a=t.getElementsByTagName(n)[0],a.parentNode.insertBefore(u,a))}(window,document,'script');
// Insert Twitter Pixel ID and Standard Event data below
twq('init','nw0pa');
twq('track','PageView');
</script>
<!-- End Twitter universal website tag code -->

<script type="text/javascript">  var _gaq = _gaq || [];
  _gaq.push(['account2._setAccount', 'UA-38719431-2']);
  _gaq.push(['account2._setDomainName', 'leanpub.com']);
  _gaq.push(['account2._trackPageview']);
</script>
<script>
  $('.toc a').on('click', function(e) {
    if (window.innerWidth <= 768) {
      $('#read-online').addClass('sidebar-hidden')
      $('.toggle-sidebar').addClass('sidebar-hidden')
    }
  })
  
  $('.scroll-wrapper').on('scroll', function(e) {
    if (e.target.scrollTop > 10) {
      $('.read-online-slidable').addClass('scrolled')
      $('#scroll-wrapper').addClass('read-online-scrolled')
    } else {
      $('.read-online-slidable').removeClass('scrolled')
      $('#scroll-wrapper').removeClass('read-online-scrolled')
    }
  })
  
  $('.toggle-sidebar').on('click', function(e) {
    $(this).toggleClass('sidebar-hidden')
    $('#read-online').toggleClass('sidebar-hidden')
  })
  
  if (window.innerWidth <= 768) {
    $('#read-online').addClass('sidebar-hidden')
    $('.toggle-sidebar').addClass('sidebar-hidden')
  }
</script>


<div><div class="grecaptcha-badge" data-style="bottomright" style="width: 256px; height: 60px; display: block; transition: right 0.3s ease 0s; position: fixed; bottom: 14px; right: -186px; box-shadow: gray 0px 0px 5px; border-radius: 2px; overflow: hidden;"><div class="grecaptcha-logo"><iframe title="reCAPTCHA" src="./Read What&#39;s New in Java 8 _ Leanpub_files/anchor.html" width="256" height="60" role="presentation" name="a-siawqod6egb4" frameborder="0" scrolling="no" sandbox="allow-forms allow-popups allow-same-origin allow-scripts allow-top-navigation allow-modals allow-popups-to-escape-sandbox"></iframe></div><div class="grecaptcha-error"></div><textarea id="g-recaptcha-response-100000" name="g-recaptcha-response" class="g-recaptcha-response" style="width: 250px; height: 40px; border: 1px solid rgb(193, 193, 193); margin: 10px 25px; padding: 0px; resize: none; display: none;"></textarea></div><iframe style="display: none;" src="./Read What&#39;s New in Java 8 _ Leanpub_files/saved_resource(1).html"></iframe></div><div style="position: absolute; width: 0px; height: 0px; overflow: hidden; padding: 0px; border: 0px; margin: 0px;"><div id="MathJax_Font_Test" style="position: absolute; visibility: hidden; top: 0px; left: 0px; width: auto; padding: 0px; border: 0px; margin: 0px; white-space: nowrap; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; font-size: 40px; font-weight: normal; font-style: normal; font-family: MathJax_Size1, monospace;"></div></div><script src="./Read What&#39;s New in Java 8 _ Leanpub_files/adsct" type="text/javascript"></script></body></html>