function Form(){this.formButton=".js-form-button",this.modal=".js-wait-modal",this.modalTitle=".js-wait-modal-title",this.modalBody=".js-wait-modal-body",this.modalFooter=".js-wait-modal-footer",this.termsConditions=".js_terms_conditions",this.disabledClass=".is-disabled",this.disabledAttribute="disabled",this.init(this)}function SingleSale(){this.$form=$(".js-single-sale-form")}function PublicUserDemo(e){this.$form=e,this.loadValidation()}function PublicUserSignup(e){this.form=e,this.init(),this.loadValidation()}function NewsletterSignup(e){this.form=e,this.recaptchaKey="6Ld-4pQUAAAAAC2qJpTLTw6ZtNlWn7xSxxt2v13W",this.init(),this.enableButtons()}mindtools="undefined"==typeof mindtools?new function(){}:mindtools,mindtools.tools=void 0===mindtools.tools?new function(){}:mindtools.tools,mindtools.salesPage=void 0===mindtools.salesPage?new function(){}:mindtools.salesPage,Form.prototype=function(e){var t,o={};return o.init=function(e){t=e},o.disableButtons=function(){"function"==typeof document.querySelectorAll(t.formButton).addClass?(document.querySelectorAll(t.formButton).addClass(t.disabledClass),document.querySelectorAll(t.formButton).setAttribute(t.disabledAttribute,!0)):(mindtools.tools.addClass(document.querySelectorAll(t.formButton),t.disabledClass),mindtools.tools.setAttribute(document.querySelectorAll(t.formButton),t.disabledAttribute,!0))},o.enableButtons=function(){"function"==typeof document.querySelectorAll(t.formButton).removeClass?(document.querySelectorAll(t.formButton).removeClass(t.disabledClass),document.querySelectorAll(t.formButton).removeAttribute(t.disabledAttribute)):(mindtools.tools.removeClass(document.querySelectorAll(t.formButton),t.disabledClass),mindtools.tools.removeAttribute(document.querySelectorAll(t.formButton),t.disabledAttribute))},o.enableTermsConditions=function(){mindtools.tools.addEvent(document.querySelectorAll(mindtools.tools.form.termsConditions),"click",function(e){e.preventDefault?e.preventDefault():e.returnValue=!1,mindtools.tools.modal({title:"Terms & Conditions",body:"Loading",ajaxUrl:"/terms-and-conditions?notemplate"})})},o.waitMessage={modify:function(e,t,o,s){s||(s=!1),mindtools.tools.modal.modify({closable:s,title:e,body:t,footButtons:o})},on:function(){return mindtools.tools.modal({closable:!1,title:"Processing",body:'<img style="margin:auto;" src="/public/assets/images/spinner/balls.gif"/><p class="js-wait-modal-body" style="text-align: center;">Please wait...</p>',footButtons:""}),!0},off:function(){return mindtools.tools.modal.off(),!0}},o.enableValidation=function(){e.validator.setDefaults({highlight:function(t){e(t).closest(".form-group").addClass("has-error"),e(t).closest(".form-group").removeClass("has-success")},unhighlight:function(t){e(t).closest(".form-group").removeClass("has-error"),e(t).closest(".form-group").addClass("has-success")},errorElement:"span",errorClass:"help-block",errorPlacement:function(t,o){t.insertAfter(e(o).closest(".form-group").children().last())}}),e.validator.addMethod("noEmail",function(e,t){var o=!0,s=-1==e.indexOf("@"),r=-1==e.indexOf(".");return 0==s&&0==r&&(o=!1),o},"Choose a username that is not your email"),e.validator.addMethod("noSpaces",function(e,t){return-1==e.indexOf(" ")},"Please use only letters or numbers"),e.validator.addMethod("pattern",function(e,t,o){return this.optional(t)||o.test(e)},"Invalid format."),e.validator.addMethod("EMAIL",function(e,t){return this.optional(t)||/^[a-zA-Z0-9._\+-]+@[a-zA-Z0-9-]+\.[a-zA-Z.]{2,20}$/i.test(e)},"Please enter a valid email address.")},o.runAjaxScript=function(t){e(t).find("script").each(function(){var e=document.createElement("script");e.text=this.innerHTML;for(var t=this.attributes.length-1;t>=0;t--)e.setAttribute(this.attributes[t].name,this.attributes[t].value);this.parentNode.replaceChild(e,this)})},o}(jQuery),mindtools.tools.form=new Form,SingleSale.prototype=function(e,t){var o={startOrder:function(o){o=this,e.waitMessage.modify("Processing","Processing Payment",""),e.waitMessage.on(),e.disableButtons();var s=t.ajax({type:"POST",url:"/offers/payment/tw",data:{email:t("#vin_Account_emailAddress").val(),name:t("#vin_PaymentMethod_accountHolderName").val(),step:"TW"}});s.done(function(e,t,s){if(200===s.status)return o.$form[0].submit()}),s.fail(function(){mindtools.tools.form.waitMessage.off(),mindtools.tools.form.enableButtons(),alert("There has been a problem with the request. Possible duplication of input data to previous request\nPlease check the fields and try again.")})}};return o}(mindtools.tools.form,jQuery),PublicUserDemo.prototype=function(e,t){var o={};return o.loadValidation=function(){this.$form.validate({rules:{email:{required:!0,EMAIL:!0},f_name:{required:!0},phone:{required:!0},company:{required:!0}},messages:{email:{required:"Please enter your email address.",EMAIL:"Email format not acceptable"},f_name:{required:"Please enter your full name."},phone:{required:"Please enter your telephone number."},company:{required:"Please enter your company name."}}})},o}(jQuery),PublicUserSignup.prototype=function(e,t){var o=Object.create(Form.prototype);return o.init=function(){this.enableValidation()},o.loadValidation=function(){t('[data-toggle="popover"]').popover(),this.form.validate({rules:{signup_password:{required:!0,pattern:/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*_-])/,minlength:6},signup_retype_password:{equalTo:"#signup_password"},signup_email:{required:!0,EMAIL:!0},signup_username:{remote:{url:"/pages/publicPlusUserSignup/usernameIsUnique/1"+t("#signup_username").val(),type:"get",dataType:"text"},required:!0,pattern:/^[a-zA-Z0-9-_]+$/,minlength:4},messages:{signup_username:{remote:"Username already in use!"}}},messages:{signup_password:{required:"Password is too short (min 8 characters).",pattern:"Password must contain at least 1 upper case, lower case, number and special character",minlength:"Password is too short (min 8 characters)."},signup_retype_password:{required:"Confirm the password.",minlength:"Minimum 6 characters.",equalTo:"Passwords do not match."},signup_username:{remote:"Username already in use",required:"Please enter a username",minlength:"Minimum 4 characters.",pattern:"Letters, numbers and _- only"},signup_email:{required:"Please enter your email address.",EMAIL:"Email format not acceptable"}},submitHandler:function(){this.startOrder()}.bind(this)})},o.startOrder=function(){var e=this.form.serialize();t.ajax({url:"/pages/publicPlusUserSignup/signup/1",type:"post",data:e,dataType:"json",success:function(e){"Success"==e.Status?(quiz_user_id=e.Message,mindtools.quiz&&mindtools.quiz.checkForLoggedOutUnsubmittedData(!0),t(".login a").remove(),t(".login").append('<a href="/pages/PublicPlusUserLogout/logout/1">Logout</a>'),publicLogin.newsletterSignupForm(!1)):(t("fieldset").remove(),t(".form-fields-wrapper").append("<h3>"+e.Message+"</h3>"),t(".form-fields-wrapper").append("<h5>Please try again later.</h5>"),setTimeout(function(){t(".mfp-close").click()},5e3))}.bind(this)})},o}(mindtools.tools.form,jQuery),NewsletterSignup.prototype=function(e){var t=Object.create(Form.prototype);return t.init=function(){this.enableRecaptcha(),this.enableValidation();var t=this;e(this.form).validate({onkeyup:function(t){e(".js-email-typo-hint").remove();try{Mailcheck.run({email:t.value,suggested:function(o){o.full.length&&(e(t).closest(".form-group").addClass("has-error").append('<a href="#" onclick="" class="help-block js-email-typo-hint">Did you mean '+o.full+"?</a>"),document.querySelector(".js-email-typo-hint").addEventListener("click",function(e){e.preventDefault();e.currentTarget.innerText;document.querySelectorAll(".js_email").forEach(function(e){e.value=o.full})}))}})}catch(e){console.log("Mailcheck not loaded")}},rules:{newsletter_firstname:{required:!0},newsletter_email:{required:!0,EMAIL:!0}},messages:{first_name:{required:"Please enter your name."},email:{required:"Please enter your email address.",EMAIL:"Email format not acceptable"}},submitHandler:function(o,s){s.preventDefault();var r="\n                    .subscribe-form .js-progress-indicator,\n                    .newsletter .js-progress-indicator, \n                    .widget_newsletter .js-progress-indicator\n                ";e(r).length&&e(r).addClass("loader"),e(o).find('input[type="submit"]').attr("disabled","disabled"),dataLayer.push({event:"newsletterAjaxSignupSubmit",eventCategory:"newsletterSignup",eventAction:"newsletterAjaxSignup"}),t.startOrder.bind(t),t.startOrder()}}),e("body").click(function(){e('form[name="newsletter"] .help-block').remove()})},t.startOrder=function(){var e=this.form,t=this.recaptchaKey;grecaptcha.ready(function(){grecaptcha.execute(t,{action:"newsletter"}).then(function(t){var o=document.createElement("input");o.type="hidden",o.class="g-recaptcha-response",o.name="g-recaptcha-response",o.value=t,e.appendChild(o),e.submit()})})},t.enableRecaptcha=function(){if(!document.querySelector('script[src^="//www.google.com/recaptcha/api.js?render='+this.recaptchaKey+'"]')){var e=document.createElement("script");e.type="text/javascript",e.src="//www.google.com/recaptcha/api.js?render="+this.recaptchaKey,document.head.appendChild(e)}},t}(jQuery);try{module.exports={Form:Form,NewsletterSignup:NewsletterSignup}}catch(e){}