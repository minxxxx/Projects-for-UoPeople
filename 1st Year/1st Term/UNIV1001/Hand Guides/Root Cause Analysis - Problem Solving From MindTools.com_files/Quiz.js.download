!function e(t,i,n){function r(o,a){if(!i[o]){if(!t[o]){var u="function"==typeof require&&require;if(!a&&u)return u(o,!0);if(s)return s(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var l=i[o]={exports:{}};t[o][0].call(l.exports,function(e){return r(t[o][1][e]||e)},l,l.exports,e,t,i,n)}return i[o].exports}for(var s="function"==typeof require&&require,o=0;o<n.length;o++)r(n[o]);return r}({1:[function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(i,"__esModule",{value:!0}),i.DesktopView=void 0;var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.quiz=t,this.currentView="",this.init()}var t,i;return t=e,(i=[{key:"init",value:function(){if(document.getElementById("questionnaire")){if(this.updateWindowsData(),1==$(".quizwrap").length)return;return $("#questionnaire").each(function(){var e,t=$(this);function i(){e.find("th").each(function(e){$(this).css("width",t.find("th").eq(e).outerWidth()+"px")})}$(window).resize(i),$(window).scroll(function(){var i=$(this).scrollTop(),n=t.offset().top,r=n+t.height()-t.find("thead").height();i<n||i>r?e.hide():i>=n&&i<=r&&e.is(":hidden")&&e.show()}),t.wrap('<div class="quizwrap" />'),(e=t.clone()).find("tbody").remove().end().addClass("fixed").insertBefore(t),i()})}}},{key:"updateWindowsData",value:function(){window.onload=function(){window.dispatchEvent(new Event("resize"))}}},{key:"setCurrentView",value:function(e){this.currentView=e}},{key:"switchToDesktop",value:function(){var e=$("#questionnaire").width();$(".grey-block").css("width",e),this.removeSmartphoneQuizLabels(),this.quiz.parent().toggleClass("quiz-app quiz-verbose"),$("#quiz-nav").remove(),$("thead#questionnairetop").toggle(),$("select#jump-to").length>0&&$("select#jump-to").hide(),$(".question-marker").hide(),$("tbody#questionnairebody").find("tr.question_block").show(),$("tbody#questionnairebody").find("tr.question_block td").attr("colspan","1"),$("td.rb label").toggle()}},{key:"removeSmartphoneQuizLabels",value:function(){$("tbody#questionnairebody").find("tr.question_block").each(function(){for(var e=$(this).find("td.rb"),t=0;t<e.length;t++)$(e[t]).find("label").remove()})}}])&&n(t.prototype,i),e}();i.DesktopView=r},{}],2:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.MobileView=void 0;var n=e("../../../tools/MediaQueries");function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.quiz=t,this.nextButton=null,this.prevButton=null,this.currentQuestion=0,this.questions=null,this.questionsCount=0,this.currentView="",this.init()}var t,i;return t=e,(i=[{key:"init",value:function(){this.questions=$("tbody#questionnairebody").find("tr.question_block"),this.questionsCount=this.questions.length-1}},{key:"setCurrentView",value:function(e){this.currentView=e}},{key:"switchToMobile",value:function(){$("thead#questionnairetop").hide(),$("tbody#questionnairebody").find("tr").hide(),$("tbody#questionnairebody").find("tr.question_block:first").show(),$("tbody#questionnairebody").find("tr.question_block td").attr("colspan","6"),this.quiz.wrap('<div class="quiz-app" />'),this.createNavigationElements(),this.createQuestionFilter(),this.addSmartphoneQuizLabels(),this.questionMarker(),$("select#jump-to").show(),$(".question-marker").show(),$("tbody#questionnairebody").find("tr").hide(),$("tbody#questionnairebody").find("tr.question_block:first").show(),$("tbody#questionnairebody").find("tr.question_block td").attr("colspan","6"),this.updateQuestionMarker()}},{key:"createNavigationElements",value:function(){var e=this;$("#quiz-nav").length||($('<nav id="quiz-nav" />').appendTo(this.quiz),$('<nav id="quiz-nav" />').css("background","red"),$('<button class="quiz-navigate-prev button" />').attr("data-dir","prev").text("Previous").appendTo($("#quiz-nav")).attr("disabled",!0),$('<button class="quiz-navigate-next button" />').attr("data-dir","next").text("Next").insertAfter(".quiz-navigate-prev")),this.nextButton=$("#quiz-nav").find('button[data-dir="next"]'),this.prev=$("#quiz-nav").find('button[data-dir="prev"]'),$("#quiz-nav").find("button").on("click",function(){e.retrieveNextQuestion($(this).data("dir")),e.buttonStates(),e.loadQuestion(),e.updateQuestionMarker(),e.resetFilter("--")}),document.onkeydown=function(t){switch((t=t||window.event).keyCode){case 37:e.leftArrowPressed(t);break;case 39:e.rightArrowPressed(t)}},document.addEventListener("keypress",function(t){var i=e.currentQuestion;e.keyboardToSelectAnswer(t,i)})}},{key:"updateQuestionMarker",value:function(){$("span.question-marker").text("Question "+(this.currentQuestion+1)+" of "+(this.questionsCount+1))}},{key:"createQuestionFilter",value:function(){var e=this;if(1!=$(".jump-to-filter").length){var t=$('<div class="jump-to-filter" />').insertBefore($("#quiz-nav")),i=$('<select id="jump-to" name="jump-to" />').appendTo(t);$('<option value="--">Jump to Question</option>').appendTo(".jump-to-filter #jump-to");for(var n=0;n<=this.questionsCount;n++)$('<option value="'+n+'">Question: '+(n+1)+"</option>").appendTo(i);$("select#jump-to").on("change",function(){var t=parseInt($(this).val());t===parseInt(t,10)&&(e.currentQuestion=parseInt($(this).val()),e.buttonStates(),e.loadQuestion(),e.updateQuestionMarker())})}}},{key:"addSmartphoneQuizLabels",value:function(){for(var e=$("#questionnairetop .answer"),t=[],i=0;i<e.length;i++)t.push($(e[i]).text().trim());$("tbody#questionnairebody").find("tr.question_block").each(function(){for(var e=$(this).find("td.rb"),i=0;i<e.length;i++)$("<label>"+t[i]+"</label>").prependTo(e[i])})}},{key:"questionMarker",value:function(){0==$(".question-marker").length&&$('<span class="question-marker" />').text("Question "+(this.currentQuestion+1)+" of "+(this.questionsCount+1)).prependTo(this.quiz)}},{key:"questionMarker",value:function(){0==$(".question-marker").length&&$('<span class="question-marker" />').text("Question "+(this.currentQuestion+1)+" of "+(this.questionsCount+1)).prependTo(this.quiz)}},{key:"resetFilter",value:function(e){$("select#jump-to").val(e)}},{key:"retrieveNextQuestion",value:function(e){var t=this.currentQuestion;t+=~~("next"===e)||-1,this.currentQuestion=t}},{key:"loadQuestion",value:function(){this.questions.hide(),$(this.questions[this.currentQuestion]).show()}},{key:"buttonStates",value:function(){0===this.currentQuestion?this.prev.attr("disabled",!0):this.prev.attr("disabled",!1),this.currentQuestion===this.questionsCount?this.nextButton.attr("disabled",!0):this.nextButton.attr("disabled",!1)}},{key:"rightArrowPressed",value:function(){this.currentView==n.MediaQueries.VIEWPORT_TABLET_PORTRAIT&&this.currentQuestion<this.questionsCount&&this.nextButton.trigger("click")}},{key:"leftArrowPressed",value:function(){this.currentView==n.MediaQueries.VIEWPORT_TABLET_PORTRAIT&&this.currentQuestion>0&&this.prev.trigger("click")}},{key:"keyboardToSelectAnswer",value:function(e,t){if(this.quiz.length>0){var i=$("tbody#questionnairebody").find("tr")[t+1].querySelectorAll("td.rb");if(mapKepyressToAnswer=[49,50,51,52,53,54,55,56,57].indexOf(e.which),this.currentView==n.MediaQueries.VIEWPORT_TABLET_PORTRAIT&&mapKepyressToAnswer<=i.length-1&&mapKepyressToAnswer>=0){var r=i[mapKepyressToAnswer].querySelectorAll("input");$(r).trigger("click")}}}}])&&r(t.prototype,i),e}();i.MobileView=s},{"../../../tools/MediaQueries":5}],3:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Quiz=void 0;var _CrossBrowserLoaderES=require("../../../tools/CrossBrowserLoaderES6"),_MediaQueries=require("../../../tools/MediaQueries"),_DesktopView=require("./DesktopView"),_MobileView=require("./MobileView");function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}var Quiz=function(){function Quiz(){_classCallCheck(this,Quiz),this.quiz=null,this.isClub=location.pathname.indexOf("/community/")>-1,this.mediaQueries=null,this.device="",this.currentView=_MediaQueries.MediaQueries.VIEWPORT_DESKTOP,this.questionFilter=null,this.desktopView=null,this.mobileView=null,this.loader=new _CrossBrowserLoaderES.CrossBrowserLoaderES6,this.loader.loaded(this.init.bind(this))}return _createClass(Quiz,[{key:"init",value:function(){var e=this;if(this.quiz=$("table#questionnaire"),this.quiz.length){this.desktopView=new _DesktopView.DesktopView(this.quiz),this.mobileView=new _MobileView.MobileView(this.quiz),this.mediaQueries=new _MediaQueries.MediaQueries,this.mediaQueries.on("resized",function(t){e.onResized(t.deviceToken)});var t=document.getElementById("submit");t&&(t.disabled=!1),$("#submit").prop("onclick",null),$("#calculatebutton").prop("onclick",null),$(".resetquiz").prop("onclick",null),this.checkForLoggedOutUnsubmittedData()}}},{key:"checkForLoggedOutUnsubmittedData",value:function(e){var t=this;e=e||!1,new Promise(function(i,n){var r=JSON.parse(localStorage.getItem("loggedOutQuizData"));if(r&&r.quiz_id===$(".quiz_id").attr("id")&&(t.isClub||e)){var s={quiz_id:r.quiz_id,user_id:window.quiz_user_id,answer_values:r.answer_values,answer_ids:r.answer_ids,question_ids:r.question_ids},o="/community/quiz/saveScore/"+r.quiz_id;e&&(o="/pages/quiz/saveScore/"+r.quiz_id),$.post(o,s).done(function(){localStorage.removeItem("loggedOutQuizData"),i()})}else i()}).finally(function(){$("#submit").click(t.calculate.bind(t)),$("#calculatebutton").click(t.calculate.bind(t)),$(".resetquiz").click(t.resetQuiz.bind(t)),t.getQuizData()})}},{key:"getQuizData",value:function(){var e=this,t=this,i=$(".quiz_id").attr("id"),n="/pages/quiz/getUserDataJson/";this.isClub&&(n="/community/quiz/getUserDataJson/"),$.post(n+i,{quizId:i}).done(function(i){var n=(i=e.parseJson(i)).answer_data,r=i.final_date,s=i.time;if(null==r?($(".quiztilegrey").hide(),$("#errormessagescont").hide(),$(".score-string").hide()):($("div").removeClass("inactive"),$("#date").text(r),$("#time").text(s),$("#errormessagescont").hide()),void 0!==n){var o=n.length;$(".pinned").remove();for(var a=0;a<o;a++){var u=n[a].answer_id;$('input[data-answerid="'+u+'"]').attr("checked",!0)}t.getData()}})}},{key:"onResized",value:function(e){switch(e){case _MediaQueries.MediaQueries.VIEWPORT_SMARTPHONE:case _MediaQueries.MediaQueries.VIEWPORT_TABLET_PORTRAIT:this.currentView!=_MediaQueries.MediaQueries.VIEWPORT_TABLET_PORTRAIT&&(this.currentView=_MediaQueries.MediaQueries.VIEWPORT_TABLET_PORTRAIT,this.mobileView.switchToMobile());break;case _MediaQueries.MediaQueries.VIEWPORT_TABLET_LANDSCAPE:case _MediaQueries.MediaQueries.VIEWPORT_DESKTOP:this.currentView==_MediaQueries.MediaQueries.VIEWPORT_TABLET_PORTRAIT&&(this.currentView=_MediaQueries.MediaQueries.VIEWPORT_DESKTOP,this.desktopView.switchToDesktop())}this.mobileView.setCurrentView(this.currentView),this.desktopView.setCurrentView(this.currentView)}},{key:"getData",value:function(e){var t=this;e=void 0===e?0:e;var i=0,n=new Array,r=new Array,s=new Array,o=new Array,a=new Array;$(".group_score").html(0),$(".max_score").html(0),$("#quiz").find(".question_block").each(function(){$(this).find('input[type="radio"]:checked').each(function(){var e=$(this)[0];if(i+=+e.value,n.push(e.id),s.push(e.value),a.push(e.name),o.push($(e).data("answerid")),null!=(r=$(e).data("group")))if(r.length>1){var r=r.split(",");for(d=0;d<r.length;d++)t.processQuizData(r[d],e)}else t.processQuizData(r,e)}),$(this).find('input[type="radio"]:not(:checked)').each(function(){var e=$(this)[0];r.push(e.id)})});var u=[];if($.each(r,function(e,t){-1===$.inArray(t,u)&&u.push(t)}),navigator.userAgent.match(/MSIE 8/)){for(var c=Array(),l=!1,d=0;d<u.length;d++){for(var h=0;h<n.length;h++)n[h]==u[d]&&(l=!0);0==l&&c.push(u[d]),l=!1}u=c}else u=u.filter(function(e){return n.indexOf(e)<0});if(u.length>0){for(d=0;d<u.length;d++)u[d]=" "+u[d];var f=u.join();$("#errormessagescont").text("Questions"+f+" still need to be answered!"),1==e&&$("#errormessagescont").show()}if(0==u.length){if($(".score-string").show(),$("#errormessagescont").hide(),$(".scorecount").text("Total = "+i),navigator.userAgent.match(/MSIE 8/))v=document.querySelectorAll(".score");else var v=document.getElementsByClassName("score");var p;for(p=0;p<v.length;++p){var m=(c=v[p]).innerHTML.split("-"),_="#score"+(p+1);i>=m[0]&&i<=m[1]&&$(_).addClass("selected")}}var w=$(".quiz_id").attr("id");if(""==window.quiz_user_id)w=$(".quiz_id").attr("id"),1==e&&null==f&&(this.isClub?publicLogin.positionLightboxImage(w,s,o,a,i):0===$(".mfp-content").length&&($.magnificPopup.open({type:"ajax",items:{src:"/pages/publicPlusUserSignup/getQuizSignupForm/1?redirectURL=".concat(encodeURIComponent(window.location.href))},callbacks:{updateStatus:function(e){"undefined"!==i&&$("#pop-score").text(i),$("#quiz_id").val(w),$("#value_array").val(s),$("#answer_id_array ").val(o),$("#question_id_array ").val(a),$("#current_score ").val(i),localStorage.setItem("loggedOutQuizData",JSON.stringify({quiz_id:w,user_id:window.quiz_user_id,answer_values:s,answer_ids:o,question_ids:a}))}}},0),$(".mfp-content").addClass("plp-signup-popup")));else if(1==e&&null==f){var y={quiz_id:w,user_id:window.quiz_user_id,answer_values:s,answer_ids:o,question_ids:a};localStorage.setItem("loggedOutQuizData",y);var b="/pages/quiz/saveScore/";return this.isClub&&(b="/community/quiz/saveScore/"),$.post(b+w,y),!1}this.mediaQueries.onResize()}},{key:"resetQuiz",value:function(){$(".quiz_question").attr("checked",!1),this.clearScoringGroups(),$(".scorecount").html("Total = 0"),$(".score-string").hide(),$("#errormessagescont").hide(),$(".fa-star").removeClass("customStar")}},{key:"clearScoringGroups",value:function(){$(".odd").removeClass("selected"),$(".even").removeClass("selected")}},{key:"calculate",value:function(){this.clearScoringGroups(),this.getData(1)}},{key:"parseJson",value:function parseJson(jsonString){return navigator.userAgent.match(/MSIE 8/)?eval("("+jsonString+")"):JSON.parse(jsonString)}},{key:"processQuizData",value:function(e,t){var i="#group_score_"+e,n="#max_score_"+e,r="#star2_"+e,s="#star3_"+e,o="#star4_"+e,a="#star5_"+e,u=$(t).data("max"),c=parseInt(t.value),l=parseInt(u);$(i).text(parseInt($(i).html())+c),$(n).text(parseInt($(n).html())+l);var d=parseInt($(i).html())/parseInt($(n).html());$(".star1").addClass("customStar"),$(r).removeClass("customStar"),$(s).removeClass("customStar"),$(o).removeClass("customStar"),$(a).removeClass("customStar"),d>.3&&$(r).addClass("customStar"),d>=.5&&$(s).addClass("customStar"),d>=.7&&$(o).addClass("customStar"),d>.8&&$(a).addClass("customStar")}}]),Quiz}();exports.Quiz=Quiz,mindtools.tools.onDomReady(function(){var e=new Quiz;mindtools.quiz=e})},{"../../../tools/CrossBrowserLoaderES6":4,"../../../tools/MediaQueries":5,"./DesktopView":1,"./MobileView":2}],4:[function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(i,"__esModule",{value:!0}),i.CrossBrowserLoaderES6=void 0;var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i;return t=e,(i=[{key:"loaded",value:function(e){"complete"===document.readyState?e():window.attachEvent?window.attachEvent("onload",e):"interactive"===document.readyState?e():window.addEventListener&&window.addEventListener("DOMContentLoaded",e)}},{key:"unloaded",value:function(e){navigator.userAgent.match(/MSIE 8/)?window.attachEvent("onunload",e):navigator.userAgent.match(/MSIE 9/)?$(window).bind("onbeforeunload",e):window.addEventListener("unload",e)}}])&&n(t.prototype,i),e}();i.CrossBrowserLoaderES6=r},{}],5:[function(e,t,i){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(i,"__esModule",{value:!0}),i.MediaQueries=void 0;var u=e("events").EventEmitter,c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(i,u);var t=function(e){return function(){var t,i=a(e);if(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()){var r=a(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return function(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,t)}}(i);function i(){var e;return function(e,t){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this),(e=t.call(this)).init(),e.deviceToken="",e}return s(i,null,[{key:"VIEWPORT_DESKTOP",get:function(){return"desktop"}},{key:"VIEWPORT_TABLET_LANDSCAPE",get:function(){return"ltablet"}},{key:"VIEWPORT_TABLET_PORTRAIT",get:function(){return"ptablet"}},{key:"VIEWPORT_SMARTPHONE",get:function(){return"smartphone"}}]),s(i,[{key:"init",value:function(){navigator.userAgent.match(/MSIE 8/)||(window.addEventListener("resize",this.onResize.bind(this)),this.onResize())}},{key:"onResize",value:function(){navigator.userAgent.match(/MSIE 8/)&&this.emit("resized",{deviceToken:i.VIEWPORT_DESKTOP}),Modernizr.mq("screen and (max-width: 39.063em)")&&this.deviceToken!=i.VIEWPORT_SMARTPHONE&&(this.deviceToken=i.VIEWPORT_SMARTPHONE,this.emit("resized",{deviceToken:this.deviceToken})),Modernizr.mq("screen and (min-width: 39.125em) and (max-width: 61.250em)")&&this.deviceToken!=i.VIEWPORT_TABLET_PORTRAIT&&(this.deviceToken=i.VIEWPORT_TABLET_PORTRAIT,this.emit("resized",{deviceToken:this.deviceToken})),Modernizr.mq("screen and (min-width: 61.250em) and (max-width: 765em)")&&this.deviceToken!=i.VIEWPORT_TABLET_LANDSCAPE&&(this.deviceToken=i.VIEWPORT_TABLET_LANDSCAPE,this.emit("resized",{deviceToken:this.deviceToken})),Modernizr.mq("screen and (min-width: 76em)")&&this.deviceToken!=i.VIEWPORT_DESKTOP&&(this.deviceToken=i.VIEWPORT_DESKTOP,this.emit("resized",{deviceToken:this.deviceToken}))}}]),i}();i.MediaQueries=c},{events:6}],6:[function(e,t,i){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function s(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,i,n,a,u,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var l=new Error('Uncaught, unspecified "error" event. ('+t+")");throw l.context=t,l}if(o(i=this._events[e]))return!1;if(r(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),i.apply(this,a)}else if(s(i))for(a=Array.prototype.slice.call(arguments,1),n=(c=i.slice()).length,u=0;u<n;u++)c[u].apply(this,a);return!0},n.prototype.addListener=function(e,t){var i;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?s(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,s(this._events[e])&&!this._events[e].warned&&(i=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){if(!r(t))throw TypeError("listener must be a function");var i=!1;function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var i,n,o,a;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(o=(i=this._events[e]).length,n=-1,i===t||r(i.listener)&&i.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(s(i)){for(a=o;a-- >0;)if(i[a]===t||i[a].listener&&i[a].listener===t){n=a;break}if(n<0)return this;1===i.length?(i.length=0,delete this._events[e]):i.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r(i=this._events[e]))this.removeListener(e,i);else if(i)for(;i.length;)this.removeListener(e,i[i.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},{}]},{},[3]);