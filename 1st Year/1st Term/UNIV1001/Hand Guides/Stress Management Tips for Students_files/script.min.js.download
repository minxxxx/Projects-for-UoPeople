function textUpdate(){var g=ad.root.querySelectorAll(".text, .text-left, .text-right, .text-bottom-left");var a=ad.root.querySelectorAll(".text.clip, .text-left.clip, .text-right.clip, .text-bottom-left.clip");if(a&&a.length){for(var d=0;d<a.length;d++){var f=a[d];var m=f.offsetHeight;var l=f.querySelector("span");if(l){if(l.offsetHeight>m){var h=l.innerHTML;var j=h.split(" ");for(var e=0;e<j.length;e++){j.pop();l.innerHTML=j.join(" ")+" ...";if(l.offsetHeight<=m){break}}}}else{var c=f.style.height;f.style.height="auto";if(f.offsetHeight>m){var h=f.innerHTML;var j=h.split(" ");for(var e=0;e<j.length;e++){j.pop();f.innerHTML=j.join(" ")+" ...";if(f.offsetHeight<=m){break}}}f.style.height=c}}}for(var d=0;d<g.length;d++){var f=g[d];var b=window.getComputedStyle(f,null).getPropertyValue("font-size");var n=parseInt(b);var m=f.offsetHeight;var l=f.querySelector("span");if(l){if(l.offsetHeight>m){for(var e=n-1;e>0;e--){f.style.fontSize=e+"px";if(l.offsetHeight<=m){break}}}}else{var c=f.style.height;f.style.height="auto";if(f.offsetHeight>m){for(var e=n-1;e>0;e--){f.style.fontSize=e+"px";if(f.offsetHeight<=m){break}}}f.style.height=c}}}var Ad=function(d){var b=d.width,o=d.height,m=d.root;var a="borderWidth" in d&&d.borderWidth?d.borderWidth:1;var e="borderColor" in d&&d.borderColor?d.borderColor:"#000";var h={},k={},n=[];var l=function(t,q){if(t&&typeof t=="string"){var u=t;t=[];t.push(u)}if(t&&typeof t=="object"&&t.length){var s=[];var r=document.querySelector("head");function p(v){s.push(this);if(s.length==t.length){q(s)}}t.forEach(function(y){if(y&&typeof y=="string"&&y.length){if(y.indexOf(".js")>0){var v=document.createElement("script");v.type="text/javascript";v.onload=p;v.src=y;r.appendChild(v)}else{if(y.indexOf(".css")>0){var w=document.createElement("style");w.type="text/css";w.setAttribute("rel","stylesheet");w.onload=p;w.setAttribute("href",y);r.appendChild(w)}else{var x=new Image();x.onload=p;x.src=y}}}})}};var g=function(p,r){var q=typeof p=="string"&&p&&p.length&&m.querySelector(p)?m.querySelector(p):p;if(q&&r&&r.length){q.textContent=r;while(q.clientHeight<q.scrollHeight){r=q.innerHTML.trim();if(r.split(" ").length<=1){break}q.innerHTML=r.replace(/\W*\s(\S)*$/,"...")}}};var j=function(){var t="",r=m.offsetWidth,p=m.offsetHeight;var q=a+"px solid "+e;t='<div class="ad-border-top" style="position:absolute;display:inline-block;width:'+r+"px;border-top:"+q+';top:0px;left:0px;"></div><div class="ad-border-right" style="position:absolute;display:inline-block;height:'+p+"px;border-left:"+q+";top:0px;left:"+(r-a)+'px;"></div><div class="ad-border-bottom" style="position:absolute;display:inline-block;width:'+r+"px;border-top:"+q+";top:"+(p-a)+'px;left:0px;"></div><div class="ad-border-left" style="position:absolute;display:inline-block;height:'+p+"px;border-left:"+q+';top:0px;left:0px;"></div>';var s=document.createElement("div");s.className="ad-borders";s.innerHTML=t;m.appendChild(s)};var i=function(r,q){var p=r.match(/\!\{(.*?)\}/g);if(p){p.forEach(function(u){var s=u.split("!{").join("").split("}").join("");for(var t in q){if(t==s){s=q[t]}}r=r.split(u).join(s)})}return r};var f=function(){var t=m.innerHTML.replace(/(\r\n|\n|\r)/gm," ").trim();var z=t.split("  ");while(z.length>1){t=t.split("  ").join(" ").split("> <").join("><");z=t.split("  ")}var u=n[0];m.innerHTML=t;var y=m.querySelectorAll("[data-image]");if(y.length){for(var v=0;v<y.length;v++){var w=y[v];var q="style" in w.dataset?w.dataset.style:"";w.innerHTML="<img "+(q.length?'style="'+q+'"':"")+' src="'+u[w.dataset.image]+'" />';w.removeAttribute("data-image")}}var r=m.querySelectorAll("[data-text]");if(r.length){for(var v=0;v<r.length;v++){var w=r[v];var q="style" in w.dataset?w.dataset.style:"";w.innerHTML="<span "+(q.length?'style="'+q+'"':"")+">"+(w.dataset.text.indexOf("!{")==-1?(w.dataset.text in u?u[w.dataset.text]:w.dataset.text):i(w.dataset.text,u))+"</span>";w.removeAttribute("data-text")}}t=m.innerHTML;t=i(t,u);m.innerHTML=t;var p=document.querySelectorAll("[data-dynamic]");for(var v=0;v<p.length;v++){var w=p[v];w.innerHTML=i(w.innerHTML,u)}var x=m.querySelectorAll("[data-backgroundImage]");if(x.length){for(var v=0;v<x.length;v++){var w=x[v];w.style.backgroundImage="url("+u[w.dataset.backgroundimage]+")";w.removeAttribute("data-backgroundImage")}}textUpdate();var s=m.querySelectorAll("[id]");if(s&&s.length){for(var v=0;v<s.length;v++){var w=s[v];if(w){h[w.id]=w}}}};var c=function(t,p){var r=[],s;if(typeof t=="object"&&amo&&"attributes" in amo&&Object.keys(amo.attributes).length){n.push(amo.attributes)}else{if("cam" in t&&Object.keys(t).length){for(var q in t.cam){amo.registerVariation(q,t.cam[q])}}if("feed" in t&&t.feed.length){t.feed.forEach(function(u){amo.registerContent(u)})}if("content" in amo&&amo.content&&amo.content.length){amo.content.forEach(function(v){var w=v;w.feedData=v;if("variation" in amo&&amo.variation&&Object.keys(amo.variation).length){for(var u in amo.variation){w[u]=amo.variation[u]}}if("staticData" in t&&t.staticData&&Object.keys(t.staticData).length){for(var u in t.staticData){w[u]=t.staticData[u]}}n.push(w)})}}if("beforeLoad" in t&&typeof t.beforeLoad=="function"){s=t.beforeLoad}if(n.length){n.map(function(v){if("staticData" in t&&t.staticData&&Object.keys(t.staticData).length){for(var u in t.staticData){v[u]=t.staticData[u]}}for(var u in v){v[u]=typeof v[u]=="string"?i(v[u],v.feedData):v[u]}});n=s(n);n.forEach(function(v){for(var u in v){var w=v[u];if(typeof w=="string"&&w.match(/\.(bmp|jpeg|jpg|gif|png|webp)$/)!=null&&w.indexOf("/")!=-1){r.push(w)}}});if(r&&r.length){l(r,function(u){f();p(n,u);setTimeout(function(){h.overlay.style.opacity=0;ad.addBorder()},10);setTimeout(function(){h.overlay.style.visibility="hidden"},510)})}else{f();p(n);setTimeout(function(){h.overlay.style.opacity=0;ad.addBorder()},10);setTimeout(function(){h.overlay.style.visibility="hidden"},510)}}};return{root:m,layers:h,frames:k,width:b,height:o,loadAssets:function(q,p){return l(q,p)},setText:function(p,r,q){return g(p,r,q)},addBorder:function(){return j()},update:function(){return f()},contentSetup:function(q,p){return c(q,p)}}};